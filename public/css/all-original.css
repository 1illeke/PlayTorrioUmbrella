/* Performance mode overrides: remove expensive visual effects when enabled */
        body.perf-mode * { backdrop-filter: none !important; }
        body.perf-mode .shadow-heavy { box-shadow: none !important; }
        /* Prefer letting Chrome skip offscreen rendering */
        body.perf-mode img { content-visibility: auto; }
        :root {
            --primary: #2a1847;    /* header/cards */
            --secondary: #8b5cf6;  /* subtle accents */
            --tertiary: #c084fc;   /* highlights/pills */
            --dark: #120a1f;       /* page background */
            --light: #f8f9fa;      /* text */
            --gray: #6c757d;       /* muted text */
            --danger: #dc3545;
            --success: #28a745;
            /* Accent (kept var name for minimal changes) */
            --vlc-orange: #a855f7; /* accent purple */
            --vlc-dark: #2d2d2d;
            /* Restored previously implicit theme variables used throughout layout */
            --header-bg: var(--primary);
            --card-bg: #1d1233;
            --input-bg: rgba(255,255,255,0.06);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--dark);
            color: var(--light);
            overflow-x: hidden;
        }

        /* Custom Title Bar - hidden on macOS to use native */
        .custom-title-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 32px;
            background: linear-gradient(135deg, rgba(42, 24, 71, 0.95) 0%, rgba(18, 10, 31, 0.95) 100%);
            border-bottom: 1px solid rgba(168, 85, 247, 0.3);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 12px;
            z-index: 999999;
            -webkit-app-region: drag;
            user-select: none;
        }
        
        /* Hide custom title bar on macOS */
        body.platform-darwin .custom-title-bar {
            display: none;
        }
        
        /* Adjust body padding only for non-mac platforms */
        body.ui-new:not(.platform-darwin) {
            padding-top: 32px;
        }
        
        body.ui-new:not(.platform-darwin) header {
            top: 32px;
        }

        /* Keep full-screen overlays below the title bar in the new UI */
        body.ui-new:not(.platform-darwin) .wcjs-player-container,
        body.ui-new:not(.platform-darwin) .vlc-player-container,
        body.ui-new:not(.platform-darwin) .custom-player-container,
        body.ui-new:not(.platform-darwin) #livetv-stream-viewer,
        body.ui-new:not(.platform-darwin) #video-player-modal,
        body.ui-new:not(.platform-darwin) #books-reader-modal,
        body.ui-new:not(.platform-darwin) #epubReaderOverlay,
        body.ui-new:not(.platform-darwin) #server-selection-modal {
            top: 32px !important;
            height: calc(100vh - 32px) !important;
        }
        
        .title-bar-left {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--light);
        }
        
        .title-bar-title {
            opacity: 0.9;
        }
        
        .title-bar-controls {
            display: flex;
            gap: 4px;
            -webkit-app-region: no-drag;
        }
        
        .title-bar-btn {
            width: 46px;
            height: 32px;
            border: none;
            background: transparent;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-size: 10px;
            position: relative;
        }
        
        .title-bar-btn svg {
            width: 10px;
            height: 10px;
        }
        
        .title-bar-btn:hover {
            background: rgba(168, 85, 247, 0.2);
        }
        
        .title-bar-btn.title-bar-close:hover {
            background: #dc3545;
            color: white;
        }
        
        /* Adjust body padding for title bar */
        body.ui-new:not(.platform-darwin) {
            padding-top: 32px;
        }
        
        body.ui-new:not(.platform-darwin) header {
            top: 32px;
        }

        /* Global performance profile (safe visual downgrades only) */
        body.perf-mode * { backdrop-filter: none !important; }
        body.perf-mode .shadow-heavy { box-shadow: none !important; }
        body.perf-mode img { content-visibility: auto; }
        body.perf-mode #updateOverlay { backdrop-filter: none !important; }

        header {
            background-color: var(--header-bg);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 900;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--light);
            text-decoration: none;
        }
        
        /* Search Container */
        .search-container {
            position: relative;
            flex: 1;
            max-width: 600px;
        }
        
        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            pointer-events: none;
        }
        
        .search-container input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 2px solid rgba(168, 85, 247, 0.3);
            border-radius: 25px;
            background-color: var(--input-bg);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .search-container input:focus {
            outline: none;
            border-color: var(--vlc-orange);
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1);
        }
        
        .search-container input::placeholder {
            color: var(--gray);
        }
        
        .user-actions {
            display: flex;
            gap: 0.75rem;
            align-items: center;
            flex-wrap: nowrap; /* Keep buttons on same line */
        }
        
        /* Consistent button sizing for navbar */
        .user-actions .btn {
            padding: 0.6rem 1rem;
            font-size: 0.9rem;
            white-space: nowrap;
            min-height: 38px;
            border-radius: 8px;
            flex-shrink: 1; /* Allow buttons to shrink */
        }
        
        .user-actions .btn i {
            font-size: 0.95rem;
        }
        
        /* Update & version modals removed (v1.5.3 / v1.6.3). Old modal styles cleaned up. */
        
        /* Base button style (restored) */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .btn-primary {
            background-color: var(--vlc-orange);
            color: white;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--vlc-orange);
            color: var(--vlc-orange);
        }
        
        .btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-primary:hover {
            background-color: #9333ea;
        }
        
        .btn-outline:hover {
            background-color: rgba(168, 85, 247, 0.1);
        }
        
        .btn-outline.active {
            background-color: var(--vlc-orange);
            color: white;
        }
        
        main {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-left: 1rem;
            border-left: 4px solid var(--vlc-orange);
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .section-title i {
            color: var(--tertiary);
        }
        
        .categories {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            overflow-x: auto;
            padding: 0.5rem 0;
        }
        
        .category {
            padding: 0.8rem 1.5rem;
            background-color: var(--input-bg);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), background-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            white-space: nowrap;
            font-weight: 600;
        }
        
        .category:hover, .category.active {
            background-color: var(--vlc-orange);
            color: white;
        }
        
        .movies-grid, .genre-grid, .genre-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }
        
        .movie-card, .genre-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
            cursor: pointer;
        }

        /* Performance mode: reduce heavy shadows on cards */
        body.perf-mode .movie-card, body.perf-mode .genre-card {
            box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
        }
        
        .movie-card:hover, .genre-card:hover {
            transform: translateY(-12px) scale(1.03);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), 0 0 20px rgba(168, 85, 247, 0.3);
        }

        body.perf-mode .movie-card:hover, body.perf-mode .genre-card:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 8px 16px rgba(0,0,0,0.3) !important;
        }
        
        .movie-poster {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
        }
        
        .movie-info, .genre-info {
            padding: 1rem;
        }
        
        .movie-title, .genre-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .movie-year {
            color: var(--tertiary);
            font-size: 0.9rem;
        }

        /* ===== DOWNLOADER STYLES ===== */
        .downloader-search { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .downloader-search input { flex: 1; padding: 0.8rem 1rem; border-radius: 10px; border: none; background-color: rgba(255, 255, 255, 0.08); color: var(--light); }
        .downloader-search button { padding: 0.7rem 1rem; border-radius: 10px; border: none; background: linear-gradient(135deg, #8b5cf6, #6d28d9); color: #fff; cursor: pointer; }
    .downloader-results { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; }
    .downloader-results.single {
        display: flex;
        justify-content: center;
        align-items: flex-start; /* don't stretch heights */
        gap: 1rem;
    }
    .downloader-results.single .downloader-item {
        flex: 0 0 260px; /* fixed column width for poster card */
        max-width: 260px;
        align-self: flex-start;
        position: sticky; /* keep the highlighted card visible */
        top: 12px;
    }
    .downloader-results.single .downloader-files-card {
        flex: 1 1 auto; /* fill remaining space */
        min-width: 360px;
    }
        .downloader-item { display: flex; flex-direction: column; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.08); border-radius: 14px; overflow: hidden; transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94); cursor: pointer; outline: none; }
        .downloader-item:hover { transform: translateY(-4px) scale(1.02); border-color: rgba(168,85,247,0.5); box-shadow: 0 12px 32px rgba(168,85,247,0.25); }
        .downloader-item.selected { border-color: #a855f7; box-shadow: 0 0 0 2px rgba(168,85,247,0.35) inset, 0 10px 24px rgba(168,85,247,0.25); }
        .downloader-thumb { width: 100%; height: 240px; object-fit: cover; background: #1f2937; }
        .downloader-meta { padding: 0.75rem; display: flex; flex-direction: column; gap: 0.3rem; }
        .downloader-title { color: #fff; font-weight: 600; }
        .downloader-year { color: #9ca3af; font-size: 0.9rem; }
        .downloader-empty { color: #9ca3af; text-align: center; padding: 2rem 1rem; }
        .downloader-type-toggle { display:flex; align-items:center; gap:0.5rem; margin-left:auto; }
        .downloader-type-toggle .filter-btn { padding: 0.55rem 0.9rem; border-radius: 8px; border: 1px solid rgba(255,255,255,0.18); background: rgba(255,255,255,0.06); color:#fff; font-weight:600; cursor:pointer; }

        /* Ace Bet Nav Button Styles */
        .acebet-nav-item { animation: acebet-glow 2s ease-in-out infinite; }
        .acebet-nav-item:hover { background: linear-gradient(135deg, rgba(16, 185, 129, 0.25), rgba(5, 150, 105, 0.2)) !important; border-color: rgba(16, 185, 129, 0.5) !important; }
        @keyframes acebet-glow { 0%, 100% { box-shadow: 0 0 8px rgba(16, 185, 129, 0.3); } 50% { box-shadow: 0 0 16px rgba(16, 185, 129, 0.5); } }
        .acebet-nav-particles { position: absolute; inset: 0; pointer-events: none; overflow: hidden; }
        .acebet-particle-nav { position: absolute; width: 3px; height: 3px; background: #10b981; border-radius: 50%; animation: acebet-float-nav 2s ease-in-out infinite; box-shadow: 0 0 4px #10b981; }
        .acebet-particle-nav:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
        .acebet-particle-nav:nth-child(2) { top: 60%; right: 15%; animation-delay: 0.7s; }
        .acebet-particle-nav:nth-child(3) { bottom: 20%; left: 50%; animation-delay: 1.4s; }
        @keyframes acebet-float-nav { 0%, 100% { transform: translateY(0) scale(1); opacity: 0.6; } 50% { transform: translateY(-6px) scale(1.3); opacity: 1; } }

        /* Live TV Styles */
        .livetv-category-section {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 0;
        }
        .livetv-category-label {
            font-weight: 600;
            color: #10b981;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .livetv-category-dropdown {
            padding: 0.75rem 1.25rem;
            border-radius: 12px;
            border: 2px solid rgba(16, 185, 129, 0.3);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.12), rgba(5, 150, 105, 0.08));
            color: #fff;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), border-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            outline: none;
            min-width: 200px;
        }
        .livetv-category-dropdown:hover {
            border-color: rgba(16, 185, 129, 0.5);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.18), rgba(5, 150, 105, 0.12));
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }
        .livetv-category-dropdown:focus {
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.15);
        }
        .livetv-category-dropdown option {
            background: #1a1a2e;
            color: #fff;
            padding: 0.75rem;
            font-weight: 600;
        }
        .livetv-matches-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 1.25rem;
            padding: 0.5rem 0;
        }
        .livetv-match-card {
            background: linear-gradient(135deg, rgba(17, 24, 39, 0.8), rgba(31, 41, 55, 0.6));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
            position: relative;
        }
        .livetv-match-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #10b981, #3b82f6);
            opacity: 0;
            transition: opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .livetv-match-card:hover {
            transform: translateY(-6px) scale(1.02);
            border-color: rgba(16, 185, 129, 0.4);
            box-shadow: 0 12px 32px rgba(16, 185, 129, 0.2), 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        .livetv-match-card:hover::before {
            opacity: 1;
        }
        .livetv-poster {
            width: 100%;
            height: 150px;
            object-fit: cover;
            background: linear-gradient(135deg, #1f2937, #111827);
        }
        .livetv-poster-placeholder {
            width: 100%;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #1f2937, #111827);
            color: rgba(255, 255, 255, 0.2);
            font-size: 2.5em;
        }
        .livetv-match-info {
            padding: 1.25rem;
        }
        .livetv-match-title {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 0.625rem;
            color: #f9fafb;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            line-clamp: 2;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            line-height: 1.4;
            letter-spacing: 0.01em;
        }
        .livetv-match-category {
            display: inline-block;
            padding: 0.3rem 0.7rem;
            background: rgba(16, 185, 129, 0.12);
            border: 1px solid rgba(16, 185, 129, 0.25);
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 600;
            color: #34d399;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }
        .livetv-watch-btn {
            width: 100%;
            margin-top: 0.875rem;
            padding: 0.75rem;
            background: linear-gradient(135deg, #10b981, #059669);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
        .livetv-watch-btn:hover {
            background: linear-gradient(135deg, #059669, #047857);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);
            transform: translateY(-4px) scale(1.02);
        }
        .livetv-empty {
            text-align: center;
            padding: 4rem 2rem;
            color: rgba(255, 255, 255, 0.4);
        }
        .livetv-empty p {
            margin-top: 1rem;
            font-size: 1.1rem;
        }
        
        /* Streams List Modal */
        .livetv-streams-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        .livetv-streams-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 2px solid rgba(16, 185, 129, 0.3);
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(16, 185, 129, 0.3);
        }
        .livetv-streams-header {
            padding: 1.5rem;
            background: rgba(16, 185, 129, 0.1);
            border-bottom: 2px solid rgba(16, 185, 129, 0.3);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .livetv-streams-header h3 {
            font-size: 1.3rem;
            color: #10b981;
            font-weight: 700;
        }
        .livetv-close-btn {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.4);
            border-radius: 8px;
            color: #ff4757;
            padding: 0.5rem 0.75rem;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .livetv-close-btn:hover {
            background: rgba(220, 53, 69, 0.3);
            transform: scale(1.12);
        }
        .livetv-streams-list {
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .livetv-stream-item {
            padding: 1rem 1.25rem;
            background: rgba(16, 185, 129, 0.08);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 12px;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }
        .livetv-stream-item:hover {
            background: rgba(16, 185, 129, 0.15);
            border-color: #10b981;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }
        .livetv-stream-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* Disable hover animation on Live TV page trakt-card container */
        #livetv-page .trakt-card {
            transition: none !important;
        }
        #livetv-page .trakt-card:hover {
            transform: none !important;
            box-shadow: none !important;
            border-color: rgba(255,255,255,0.15) !important;
        }

        .livetv-stream-actions {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }
        .livetv-play-stream-btn, .livetv-copy-link-btn, .livetv-open-browser-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 10px;
            color: #fff;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            white-space: nowrap;
        }
        .livetv-play-stream-btn {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        .livetv-play-stream-btn:hover {
            background: linear-gradient(135deg, #059669, #047857);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
            transform: scale(1.08);
        }
        .livetv-copy-link-btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }
        .livetv-copy-link-btn:hover {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
            transform: scale(1.08);
        }
        .livetv-open-browser-btn {
            background: linear-gradient(135deg, #6366f1, #4f46e5);
        }
        .livetv-open-browser-btn:hover {
            background: linear-gradient(135deg, #4f46e5, #4338ca);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
            transform: scale(1.08);
        }
        .livetv-play-stream-btn:active, .livetv-copy-link-btn:active, .livetv-open-browser-btn:active {
            transform: scale(0.98);
        }
        .livetv-stream-source {
            font-weight: 700;
            color: #10b981;
            font-size: 1.1rem;
        }
        .livetv-stream-details {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
            font-size: 0.9rem;
        }
        .livetv-stream-badge {
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .livetv-stream-badge.hd {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: #fff;
        }
        .livetv-stream-badge.quality {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.4);
            color: #10b981;
        }
        .livetv-stream-badge.language {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.4);
            color: #3b82f6;
        }
        .livetv-stream-badge.viewers {
            background: rgba(168, 85, 247, 0.2);
            border: 1px solid rgba(168, 85, 247, 0.4);
            color: #a855f7;
        }
        .livetv-stream-badge.ads {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.4);
            color: #ef4444;
        }
        .livetv-stream-badge.nsfw {
            background: rgba(168, 85, 247, 0.2);
            border: 1px solid rgba(168, 85, 247, 0.4);
            color: #a855f7;
        }
        .livetv-loading {
            text-align: center;
            padding: 2rem;
            color: rgba(255, 255, 255, 0.6);
        }
        .livetv-loading i {
            font-size: 2em;
            animation: spin 1.2s cubic-bezier(0.65, 0, 0.35, 1) infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.98); }
        }
        @keyframes blink {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.4; transform: scale(0.96); }
        }
        .downloader-type-toggle .filter-btn.active { background: linear-gradient(135deg, #8b5cf6, #6d28d9); border-color: transparent; }
        
        .movie-rating {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--tertiary);
            color: #1f1140;
            padding: 0.3rem 0.6rem;
            border-radius: 30px;
            font-weight: 700;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .add-to-list-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.6);
            color: var(--light);
            border: none;
            padding: 0.5rem;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.7;
            transform: scale(1);
            z-index: 10;
        }
        
        .movie-card:hover .add-to-list-btn {
            opacity: 1;
            transform: scale(1.1);
        }
        
        .add-to-list-btn:hover {
            background-color: var(--success);
            transform: scale(1.12);
            opacity: 1;
        }
        
        .add-to-list-btn.in-list {
            background-color: var(--success);
            opacity: 1;
            transform: scale(1);
        }
        
        .add-to-list-btn.in-list i:before {
            content: "\f00c"; /* checkmark */
        }
        
        .movie-card .done-watching-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.6);
            color: var(--light);
            border: none;
            padding: 0.5rem;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.7;
            transform: scale(1);
            z-index: 10;
        }
        
        .movie-card:hover .done-watching-btn {
            opacity: 1;
            transform: scale(1.1);
        }
        
        .movie-card .done-watching-btn:hover {
            background-color: #17a2b8; /* info blue color */
            transform: scale(1.12);
            opacity: 1;
        }
        
        .movie-card .done-watching-btn.is-done {
            background-color: #17a2b8;
            opacity: 1;
            transform: scale(1);
        }
        
        .movie-card .done-watching-btn.is-done i:before {
            content: "\f058"; /* check-circle */
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
            font-size: 1.2rem;
            color: var(--gray);
        }
        
        .loading i {
            animation: spin 1.4s cubic-bezier(0.65, 0, 0.35, 1) infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes slideInRight {
            0% { 
                transform: translateX(100%) scale(0.9);
                opacity: 0;
            }
            60% {
                transform: translateX(-5%) scale(1.02);
                opacity: 0.9;
            }
            100% { 
                transform: translateX(0) scale(1);
                opacity: 1;
            }
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .modal.active {
            opacity: 1;
            pointer-events: all;
        }

        /* Modal dropdowns (sort/filter) */
        .modal-select {
            background: rgba(255,255,255,0.08);
            color: var(--light);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            padding: 0.35rem 0.6rem;
            font-size: 0.95rem;
            font-weight: 600;
            letter-spacing: 0.2px;
        }
        .modal-select:focus {
            outline: none;
            border-color: rgba(168,85,247,0.45);
            box-shadow: 0 0 0 3px rgba(168,85,247,0.15);
        }
        .modal-select option {
            background: #1f1140;
            color: #fff;
            font-weight: 600;
        }

        /* Episode details overlay used in showEpisodeDetails() */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 5000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }

        /* Ensure resume modal is above all other overlays */
        #resumeModal { z-index: 6000; }
        
        .modal-content {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-header {
            position: relative;
            height: 400px;
            overflow: hidden;
        }
        
        .modal-backdrop {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.4);
        }
        
        .modal-header-content {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 2rem;
            display: flex;
            gap: 2rem;
        }
        
        .modal-poster {
            width: 200px;
            height: 300px;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
        }
        
        .modal-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .modal-info {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            align-items: center;
        }
        
        .modal-rating {
            background-color: var(--tertiary);
            color: #1f1140;
            padding: 0.3rem 0.8rem;
            border-radius: 30px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .modal-year {
            font-size: 1.2rem;
            color: var(--gray);
        }
        
        .modal-tagline {
            font-style: italic;
            margin-bottom: 1rem;
            color: var(--tertiary);
        }
        
        .modal-body {
            padding: 2rem;
            background: var(--card-bg);
        }
        
        .modal-section-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--vlc-orange);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        /* Anime dropdown and button styles */
        #animeSeasonSelector:hover,
        #animeEpisodeSelector:hover {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.25), rgba(37, 99, 235, 0.25));
            border-color: rgba(59, 130, 246, 0.5);
        }
        
        #animeSeasonSelector:focus,
        #animeEpisodeSelector:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        #animeSeasonSelector option,
        #animeEpisodeSelector option {
            background: #1a1a2e;
            color: var(--light);
            padding: 0.5rem;
            font-weight: 500;
        }
        
        #animeCustomSearchBtn:hover {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        
        #animeCustomSearchBtn:active {
            transform: translateY(0);
        }
        
        #animeCustomSearchInput:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .modal-overview {
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        .cast-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .cast-card {
            cursor: pointer;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .cast-card:hover {
            transform: translateY(-5px);
        }
        
        .cast-img {
            width: 100%;
            height: 160px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 0.5rem;
        }
        
        .cast-name {
            font-weight: 600;
            margin-bottom: 0.2rem;
            font-size: 0.9rem;
        }
        
        .cast-character {
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        .similar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }
        
        .seasons-container {
            margin-bottom: 2rem;
        }
        
        .season-selector {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .season-btn {
            padding: 0.5rem 1rem;
            background-color: var(--input-bg);
            border: none;
            border-radius: 30px;
            color: var(--light);
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .season-btn.active {
            background-color: var(--vlc-orange);
            color: white;
        }
        
        .episodes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .episode-card {
            background-color: var(--input-bg);
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid transparent;
        }

        .episode-card:hover {
            border-color: var(--secondary);
        }

        .episode-card.selected {
            border-color: var(--vlc-orange);
            background-color: rgba(255, 105, 0, 0.1);
        }

        .episode-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
            justify-content: flex-end;
        }

        .episode-done-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .episode-done-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .episode-done-btn.is-done {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border-color: #22c55e;
            color: white;
        }

        .episode-done-btn.is-done:hover {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
        }

        .episode-badge {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            background: linear-gradient(135deg, #ed1c24 0%, #d41920 100%);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            z-index: 5;
        }

        .episode-subtitle {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin: 0.25rem 0;
            font-style: italic;
        }

        .episode-details-btn {
            position: absolute;
            bottom: 12px;
            right: 12px;
            transform: none;
            width: auto;
            height: 36px;
            padding: 0 14px;
            border: none;
            border-radius: 18px;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--vlc-orange) 100%);
            color: white;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 0.2px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            z-index: 4;
            box-shadow: 0 6px 14px rgba(0,0,0,0.35);
            backdrop-filter: blur(6px);
            border: 1px solid rgba(255,255,255,0.15);
        }

        .episode-details-btn:hover {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, var(--secondary) 100%);
            transform: translateY(-1px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.45);
        }

        .episode-modal {
            max-width: 700px;
            max-height: 85vh;
            overflow: hidden;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .episode-modal .modal-header {
            display: flex;
            align-items: center;
            padding: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
        }

        .episode-modal .show-poster {
            width: 60px;
            height: 90px;
            border-radius: 8px;
            object-fit: cover;
            margin-right: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
        }

        .episode-modal .header-content {
            flex: 1;
        }

        .episode-modal .modal-header h2 {
            margin: 0 0 8px 0;
            color: white;
            font-size: 24px;
            font-weight: 700;
        }

        .episode-modal .modal-subtitle {
            margin: 0;
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            font-weight: 500;
        }

        .episode-modal .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .episode-modal .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.12);
        }

        .episode-modal .modal-body {
            padding: 0;
            max-height: calc(85vh - 140px);
            overflow-y: auto;
        }

        .episode-list {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .episode-item {
            display: flex;
            align-items: center;
            padding: 16px 24px;
            background: transparent;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }

        .episode-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .episode-item:last-child {
            border-bottom: none;
        }

        /* Highlight selected episode in the modal */
        .episode-item.selected {
            background: rgba(255, 105, 0, 0.10);
            border-left: 3px solid var(--vlc-orange);
        }

        /* Stronger highlight inside episode modal to ensure visibility on gradients */
        .episode-modal .episode-item.selected {
            background: rgba(255, 105, 0, 0.14);
            border-left: 4px solid var(--vlc-orange);
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.06), 0 4px 14px rgba(255,105,0,0.25);
        }

        .episode-number {
            flex-shrink: 0;
            width: 70px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            margin-right: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .episode-info {
            flex: 1;
        }

        .episode-info h4 {
            margin: 0 0 6px 0;
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            line-height: 1.3;
        }

        .episode-info p {
            margin: 0;
            color: #8a92b2;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .episode-info p i {
            color: #667eea;
        }

        .episode-remove-btn {
            flex-shrink: 0;
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 50%;
            background: rgba(244, 67, 54, 0.8);
            color: white;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            box-shadow: 0 2px 8px rgba(244, 67, 54, 0.3);
        }

        .episode-remove-btn:hover {
            background: #f44336;
            transform: scale(1.12);
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.5);
        }
        
        .episode-img {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }
        
        .episode-info {
            padding: 0.8rem;
        }
        
        .episode-title {
            font-weight: 600;
            margin-bottom: 0.3rem;
            font-size: 0.9rem;
        }
        
        .episode-date {
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        .torrents-container {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        .torrents-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .torrents-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .torrent-item {
            background-color: var(--input-bg);
            border-radius: 8px;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }
        
        .torrent-info {
            flex: 1;
            min-width: 0;
            overflow: hidden;
        }
        
        .torrent-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            word-break: break-word;
            overflow-wrap: break-word;
        }
        
        .torrent-details {
            display: flex;
            gap: 1rem;
            font-size: 0.9rem;
            color: var(--gray);
            flex-wrap: wrap;
        }
        
        .torrent-quality {
            background-color: var(--tertiary);
            color: var(--dark);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .cached-badge {
            background: linear-gradient(135deg, #198754 0%, #20c997 100%);
            color: #fff;
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 8px;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            box-shadow: 0 2px 8px rgba(25, 135, 84, 0.3);
            animation: pulse-glow 3.5s cubic-bezier(0.45, 0, 0.55, 1) infinite;
        }
        
        .cached-badge::before {
            content: '';
            font-size: 0.9rem;
        }
        
        @keyframes pulse-glow {
            0%, 100% {
                box-shadow: 0 2px 8px rgba(25, 135, 84, 0.3);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 4px 16px rgba(25, 135, 84, 0.7);
                transform: scale(1.02);
            }
        }
        
        .torrent-actions {
            display: flex;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .torrent-pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 1rem;
        }

        .torrent-pagination button {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .torrent-pagination button:disabled {
            color: var(--gray);
            cursor: not-allowed;
        }

        /* Chromecast Device Selection Styles */
        .chromecast-modal-header {
            padding: 1.5rem 2rem;
            border-bottom: 2px solid rgba(139, 92, 246, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chromecast-modal-header h3 {
            font-size: 1.5rem;
            color: var(--light);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin: 0;
        }

        .chromecast-modal-header i {
            color: var(--tertiary);
        }

        .chromecast-device-list {
            min-height: 200px;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .chromecast-device-item {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(168, 85, 247, 0.05));
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .chromecast-device-item:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(168, 85, 247, 0.1));
            border-color: var(--tertiary);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }

        .chromecast-device-icon {
            font-size: 2rem;
            color: var(--tertiary);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(139, 92, 246, 0.2);
            border-radius: 50%;
        }

        .chromecast-device-info {
            flex: 1;
        }

        .chromecast-device-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--light);
            margin-bottom: 0.25rem;
        }

        .chromecast-device-host {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .loading-spinner {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            padding: 3rem;
            color: var(--gray);
        }

        .loading-spinner i {
            font-size: 2.5rem;
            color: var(--tertiary);
        }

        .chromecast-no-devices {
            text-align: center;
            padding: 3rem;
            color: var(--gray);
        }

        .chromecast-no-devices i {
            font-size: 3rem;
            color: var(--gray);
            margin-bottom: 1rem;
        }

        .chromecast-no-devices h4 {
            margin-bottom: 0.5rem;
            color: var(--light);
        }

        .chromecast-refresh-btn {
            margin-top: 1rem;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--secondary), var(--tertiary));
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .chromecast-refresh-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
        }


        .torrent-pagination span {
            margin: 0 1rem;
        }
        
        .provider-buttons {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            flex-wrap: nowrap; /* keep on one line */
            overflow-x: auto; /* horizontal scroll */
            -webkit-overflow-scrolling: touch;
            scroll-snap-type: x proximity;
            padding-bottom: 0.25rem;
        }
        
        .provider-btn {
            padding: 0.75rem 1.25rem;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: var(--light);
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            white-space: nowrap;
            flex: 0 0 auto; /* don't shrink */
            scroll-snap-align: start;
            min-width: 120px;
        }
        
        .provider-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }
        
        .provider-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .provider-btn.active:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        /* Pretty pill/ghost button helpers */
        .btn-pill { border-radius: 999px; padding: 0.6rem 1rem; font-weight: 700; letter-spacing: .2px; }
        .btn-ghost { background: transparent; border: 2px solid rgba(255,255,255,0.15); color: var(--light); }
        .btn-ghost:hover { border-color: rgba(255,255,255,0.35); background: rgba(255,255,255,0.06); }
        .btn-accent { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: #fff; box-shadow: 0 8px 22px rgba(102,126,234,.35); }
        .btn-accent:hover { transform: translateY(-1px); box-shadow: 0 10px 28px rgba(102,126,234,.45); }
        
        .torrent-btn {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-play {
            background-color: var(--vlc-orange);
            color: white;
        }
        
        .btn-copy {
            background-color: var(--secondary);
            color: white;
        }

        .btn-play-now {
            background-color: var(--success);
            color: white;
        }

        /* API Key Setup Modal */
        .api-setup-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 5000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .api-setup-modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .api-setup-content {
            background: var(--modal-bg);
            border-radius: 15px;
            padding: 3rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--vlc-orange);
        }
        
        .api-setup-title {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--vlc-orange);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .api-setup-description {
            color: var(--light);
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        .api-input-group {
            margin-bottom: 2rem;
        }
        
        .api-input-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--tertiary);
            font-weight: 600;
        }
        
        .api-input {
            width: 100%;
            padding: 1rem;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background-color: var(--input-bg);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .api-input:focus {
            outline: none;
            border-color: var(--vlc-orange);
            background-color: var(--hover-bg);
        }
        
        #torrentSourceSelect {
            appearance: none;
            background-image: linear-gradient(45deg, transparent 50%, var(--primary) 50%),
                              linear-gradient(135deg, var(--primary) 50%, transparent 50%);
            background-position: calc(100% - 20px) calc(50% - 2px),
                                 calc(100% - 15px) calc(50% - 2px);
            background-size: 5px 5px, 5px 5px;
            background-repeat: no-repeat;
        }
        
        #torrentSourceSelect:hover {
            background-color: rgba(255,255,255,0.12);
            border-color: rgba(255,255,255,0.3);
            transform: translateY(-1px);
        }
        
        #torrentSourceSelect:focus {
            outline: none;
            border-color: var(--primary);
            background-color: rgba(255,255,255,0.12);
            box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.2);
        }
        
        #torrentSourceSelect option {
            background: #1a1a1a;
            color: #fff;
            padding: 0.75rem;
            font-weight: 500;
        }
        
        /* Torrent Engine Select Styles */
        #torrentEngineSelect {
            transition: all 0.3s ease;
        }
        
        #torrentEngineSelect:hover {
            border-color: #06b6d4;
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.15);
        }
        
        #torrentEngineSelect:focus {
            outline: none;
            border-color: #06b6d4;
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.25);
        }
        
        #torrentEngineSelect option {
            background: #1a1a2e;
            color: #fff;
            padding: 1rem;
            font-weight: 500;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        #torrentEngineSelect option:hover,
        #torrentEngineSelect option:focus {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
            color: #fff;
        }
        
        #torrentEngineSelect option:checked {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
            color: #fff;
        }
        
        /* Theme selector styles */
        #themeSelector {
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        #themeSelector:hover {
            background: rgba(255,255,255,0.12);
            border-color: var(--vlc-orange);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        #themeSelector:focus {
            outline: none;
            border-color: var(--vlc-orange);
            background: rgba(255,255,255,0.12);
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.3);
        }
        
        #themeSelector option {
            background: var(--primary);
            color: var(--light);
            padding: 1rem;
            font-weight: 500;
            font-size: 1rem;
        }
        
        #themeSelector option:hover {
            background: var(--secondary);
        }
                .torrent-source-btn {
            position: relative;
            overflow: hidden;
        }

        .torrent-source-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .torrent-source-btn.active {
            background: rgba(76, 175, 80, 0.2) !important;
            border-color: #4CAF50 !important;
            color: #4CAF50 !important;
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.3);
        }

        .torrent-source-btn:not(.active):hover {
            background: rgba(255,255,255,0.15);
            border-color: rgba(255,255,255,0.4);
        }
        
        .api-setup-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }
        
        .api-btn {
            padding: 1rem 2rem;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }
        
        .api-btn-primary {
            background-color: var(--vlc-orange);
            color: white;
        }
        
        .api-btn-primary:hover {
            background-color: #e55a00;
            transform: translateY(-4px) scale(1.02);
        }

        /* Debrid provider select styling */
        #debridProvider {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            min-width: 240px;
            max-width: 320px;
            background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
            border: 1px solid rgba(255,255,255,0.18);
            border-radius: 10px;
            padding: 0.55rem 2.25rem 0.55rem 0.85rem;
            color: #e9ecef;
            font-weight: 600;
            letter-spacing: 0.2px;
            cursor: pointer;
            transition: border-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), background 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 20 20' fill='none'%3E%3Cpath d='M5 7l5 6 5-6' stroke='%23cfd4da' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.6rem center;
            background-size: 12px;
        }
        #debridProvider:hover {
            border-color: rgba(255,255,255,0.28);
            background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.05));
        }
        #debridProvider:focus {
            outline: none;
            border-color: var(--vlc-orange);
            box-shadow: 0 0 0 2px rgba(255,117,24,0.25);
        }
        /* Attempt to style dropdown menu items (supported in Chromium) */
        #debridProvider option {
            background-color: #151a20;
            color: #e9ecef;
        }
        
        .api-btn-secondary {
            background-color: transparent;
            color: var(--gray);
            border: 2px solid var(--gray);
        }
        
        .api-btn-secondary:hover {
            color: var(--light);
            border-color: var(--light);
        }

        /* Donate modal removed */

        /* Discord Modal */
        .discord-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 6000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .discord-modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .discord-content {
            background: linear-gradient(135deg, #5865F2, #4752C4);
            border-radius: 20px;
            padding: 3rem;
            max-width: 520px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(88, 101, 242, 0.4);
            border: 2px solid #7289DA;
            position: relative;
            animation: modalSlideIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        @keyframes modalSlideIn {
            0% {
                transform: scale(0.85) translateY(-30px);
                opacity: 0;
            }
            50% {
                transform: scale(1.02) translateY(5px);
                opacity: 0.8;
            }
            100% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }
        
        .discord-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: rgba(0, 0, 0, 0.3);
            border: none;
            color: #fff;
            font-size: 1.5rem;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .discord-close:hover {
            background-color: #ED4245;
            transform: rotate(90deg);
        }
        
        .discord-title {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            font-weight: 700;
        }
        
        .discord-logo {
            width: 48px;
            height: 48px;
        }
        
        .discord-message {
            color: #fff;
            margin-bottom: 2rem;
            line-height: 1.8;
            font-size: 1.05rem;
        }
        
        .discord-join-btn {
            padding: 1rem 2.5rem;
            border-radius: 30px;
            border: none;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.1rem;
            background: #fff;
            color: #5865F2;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .discord-join-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
        }

        /* Settings Modal */
        .settings-modal {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 4000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .settings-modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .settings-content {
            background: var(--modal-bg);
            border-radius: 15px;
            padding: 2rem;
            max-width: 800px;
            width: min(92%, 800px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--vlc-orange);
            max-height: 85vh;
            overflow: auto;
        }
        
        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .settings-title {
            font-size: 1.8rem;
            color: var(--vlc-orange);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .settings-close {
            background: transparent;
            border: none;
            color: var(--gray);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            padding: 0.5rem;
        }
        
        .settings-close:hover {
            color: var(--light);
        }
        
        .settings-section {
            margin-bottom: 2rem;
        }
        
        .settings-section h3 {
            color: var(--tertiary);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        .source-badge { display:inline-block; padding:2px 8px; border-radius: 12px; font-size: 0.75rem; font-weight:700; margin-left: 8px; background: #6c757d; color: #fff; }
        .source-badge.debrid { background:#198754; }
        .source-badge.webtorrent { background:#0d6efd; }
        .source-badge.direct-stream { background:#dc3545; }
        
        .current-api-key {
            background-color: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            color: var(--gray);
            font-family: monospace;
        }
        
        .settings-buttons {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        /* Floating Navigation Arrow (Old UI Only, Home Page Only) */
        .floating-nav-container {
            position: fixed;
            right: 30px;
            bottom: 30px;
            z-index: 1000;
            display: none;
        }

        .floating-nav-btn {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--vlc-orange) 0%, var(--secondary) 100%);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.4rem;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(168, 85, 247, 0.3);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floating-nav-btn:hover {
            transform: translateY(-4px) scale(1.02) scale(1.05);
            box-shadow: 0 12px 30px rgba(168, 85, 247, 0.4);
            background: linear-gradient(135deg, var(--tertiary) 0%, var(--vlc-orange) 100%);
        }

        .floating-nav-btn:active {
            transform: translateY(0) scale(0.95);
        }

        .floating-nav-menu {
            position: absolute;
            bottom: 70px;
            right: 0;
            background: rgba(42, 24, 71, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 0.5rem 0;
            min-width: 160px;
            /* Make the menu usable on small screens */
            max-height: calc(100vh - 140px); /* leave room for FAB and margins */
            overflow-y: auto;
            overscroll-behavior: contain;
            -webkit-overflow-scrolling: touch;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transform: translateY(10px) scale(0.95);
            pointer-events: none;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .floating-nav-container.active .floating-nav-menu {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: all;
        }

        .floating-nav-container.active .floating-nav-btn {
            background: linear-gradient(135deg, #6d28d9, #553c9a);
        }

        .floating-nav-container.active #floatingNavIcon {
            transform: rotate(180deg);
        }

        .floating-nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: #fff;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .floating-nav-item:last-child {
            border-bottom: none;
        }

        .floating-nav-item:hover {
            background: rgba(139, 92, 246, 0.2);
            color: #c084fc;
        }

        .floating-nav-item i {
            width: 16px;
            text-align: center;
            opacity: 0.8;
        }

        .floating-nav-item span {
            font-weight: 500;
            font-size: 0.9rem;
        }

        /* Show floating nav only in old UI on home page */
        body:not(.ui-new) .floating-nav-container.show-on-home {
            display: block;
        }

        /* Hide in new UI */
        body.ui-new .floating-nav-container {
            display: none !important;
        }

        /* Books Page Styles */
        .books-search-section {
            margin-bottom: 2rem;
        }

        .books-search-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .books-search-bar {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 16px;
            padding: 0.5rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }

        .books-search-bar:focus-within {
            border-color: rgba(245, 158, 11, 0.5);
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.15);
        }

        .books-search-icon {
            position: absolute;
            left: 1.25rem;
            color: #9ca3af;
            font-size: 1.1rem;
        }

        #books-search-input, #music-search-input {
            flex: 1;
            padding: 1rem 1.5rem;
            padding-left: 3rem;
            background: transparent;
            border: none;
            color: #fff;
            font-size: 1.1rem;
            outline: none;
        }

        #books-search-input::placeholder, #music-search-input::placeholder {
            color: #9ca3af;
        }

        .books-search-button {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border: none;
            border-radius: 12px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .books-search-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);
        }

        .books-loading {
            text-align: center;
            padding: 4rem 2rem;
            color: #9ca3af;
        }

        .books-loading-spinner {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            color: #f59e0b;
        }

        .books-empty {
            text-align: center;
            padding: 4rem 2rem;
            color: #9ca3af;
        }

        .books-empty-icon {
            font-size: 4rem;
            margin-bottom: 2rem;
            color: #f59e0b;
        }

        .books-empty h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #fff;
        }

        .books-results {
            animation: fadeIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .books-results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .books-results-header h3 {
            font-size: 1.5rem;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .books-results-count {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: #fff;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .books-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.25rem;
        }

        /* Music (compact) overrides using books classes */
        #music-page .books-results-grid {
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1rem;
        }
        #music-page .books-book-card {
            cursor: default;
        }
        .music-card {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 14px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .music-card:hover {
            transform: translateY(-4px);
            border-color: rgba(236, 72, 153, 0.45);
            box-shadow: 0 10px 30px rgba(236, 72, 153, 0.15);
        }
        .music-cover {
            width: 100%;
            aspect-ratio: 1 / 1;
            background: linear-gradient(135deg, #374151, #1f2937);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .music-cover img { width: 100%; height: 100%; object-fit: cover; }
        .music-info { padding: 0.75rem 0.85rem; }
        .music-title { font-size: 0.95rem; font-weight: 700; color: #fff; margin: 0 0 0.25rem 0; line-height: 1.25; }
        .music-artist { font-size: 0.85rem; color: #ec4899; margin: 0 0 0.5rem 0; }
        .music-actions { display: flex; align-items: center; justify-content: space-between; gap: 0.5rem; }
        .music-play-btn {
            flex: 1;
            display: inline-flex; align-items: center; justify-content: center; gap: 0.4rem;
            padding: 0.5rem 0.75rem;
            background: linear-gradient(135deg, #ec4899, #a855f7);
            border: none; border-radius: 10px; color: #fff; font-weight: 700; cursor: pointer;
        }
        .music-open-btn {
            width: 38px; height: 38px; display: inline-flex; align-items: center; justify-content: center;
            border-radius: 10px; border: 1px solid rgba(236,72,153,0.35); background: rgba(236,72,153,0.12); color: #ec4899; cursor: pointer;
        }
        .music-heart-btn {
            width: 38px; height: 38px; display: inline-flex; align-items: center; justify-content: center;
            border-radius: 10px; border: 1px solid rgba(236,72,153,0.35); background: rgba(236,72,153,0.12); color: #ec4899; cursor: pointer;
        }
        .music-heart-btn.added {
            border-color: rgba(244,114,182,0.6);
            background: rgba(244,114,182,0.2);
            color: #f472b6;
        }
        .music-plus-btn {
            width: 38px; height: 38px; display: inline-flex; align-items: center; justify-content: center;
            border-radius: 10px; border: 1px solid rgba(56,189,248,0.35); background: rgba(56,189,248,0.12); color: #38bdf8; cursor: pointer;
        }
        .music-download-btn {
            width: 38px; height: 38px; display: inline-flex; align-items: center; justify-content: center;
            border-radius: 10px; border: 1px solid rgba(34,197,94,0.35); background: rgba(34,197,94,0.12); color: #22c55e; cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .music-download-btn.downloaded {
            border-color: rgba(34,197,94,0.6);
            background: rgba(34,197,94,0.25);
            color: #22c55e;
        }
        .music-download-btn:hover {
            filter: brightness(1.15);
            transform: scale(1.08);
        }
        .music-folder-btn {
            width: 38px; height: 38px; display: inline-flex; align-items: center; justify-content: center;
            border-radius: 10px; border: 1px solid rgba(251,191,36,0.35); background: rgba(251,191,36,0.12); color: #fbbf24; cursor: pointer;
        }
        .music-delete-downloaded-btn {
            width: 38px; height: 38px; display: inline-flex; align-items: center; justify-content: center;
            border-radius: 10px; border: 1px solid rgba(239,68,68,0.35); background: rgba(239,68,68,0.12); color: #ef4444; cursor: pointer;
        }
        .music-play-btn:hover, .music-open-btn:hover, .music-heart-btn:hover, .music-plus-btn:hover, .music-folder-btn:hover, .music-delete-downloaded-btn:hover {
            filter: brightness(1.08);
        }
        /* Playlist open view header tweak */
        #music-page.playlist-open .books-results-header h3 i { display: none; }
        #music-page.playlist-open .books-results-header h3 { gap: 0; }

        /* Playlists list view buttons */
        .playlist-open-btn {
            display: inline-flex; align-items: center; gap: 0.35rem;
            padding: 0.35rem 0.6rem; border-radius: 8px; border: none;
            background: linear-gradient(135deg, #a855f7, #ec4899); color: #fff; cursor: pointer;
            font-weight: 600; font-size: 0.8rem;
        }
        .playlist-export-btn {
            display: inline-flex; align-items: center; gap: 0.35rem;
            padding: 0.35rem 0.6rem; border-radius: 8px; border: 1px solid rgba(56,189,248,0.35);
            background: rgba(56,189,248,0.12); color: #38bdf8; cursor: pointer;
            font-weight: 600; font-size: 0.8rem;
        }
        .playlist-delete-btn {
            width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center;
            border-radius: 8px; border: 1px solid rgba(239,68,68,0.45); background: rgba(239,68,68,0.12); color: #ef4444; cursor: pointer;
            font-size: 0.85rem;
        }
        .playlist-open-btn:hover, .playlist-export-btn:hover, .playlist-delete-btn:hover { filter: brightness(1.08); }

        /* Close playlist header button */
        .playlist-close-btn {
            display: inline-flex; align-items: center; gap: 0.45rem;
            padding: 0.5rem 0.8rem; border-radius: 10px; border: 1px solid rgba(148,163,184,0.35);
            background: rgba(148,163,184,0.12); color: #e2e8f0; cursor: pointer;
            font-weight: 700; margin-left: auto;
        }
        .playlist-close-btn:hover { filter: brightness(1.08); }
        .music-add-btn {
            width: 38px; height: 38px; display: inline-flex; align-items: center; justify-content: center;
            border-radius: 10px; border: 1px solid rgba(16,185,129,0.35); background: rgba(16,185,129,0.12); color: #10b981; cursor: pointer;
        }
        .music-add-btn.added {
            border-color: rgba(34,197,94,0.6);
            background: rgba(34,197,94,0.18);
            color: #22c55e;
        }

        /* Albums UI */
        .album-card {
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(59,130,246,0.18);
            border-radius: 14px;
            overflow: hidden;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .album-card:hover { transform: translateY(-3px); border-color: rgba(59,130,246,0.35); box-shadow: 0 14px 34px rgba(2,6,23,0.45); }
        .album-cover { width: 100%; aspect-ratio: 1 / 1; object-fit: cover; background:#111827; display:block; }
        .album-body { padding: 0.75rem; display:flex; flex-direction:column; gap:0.4rem; }
        .album-title { font-weight: 800; color:#e5e7eb; line-height:1.2; }
        .album-artist { color:#9ca3af; font-size:0.9rem; }
        .album-meta { color:#94a3b8; font-size:0.82rem; display:flex; gap:0.5rem; align-items:center; }
        .album-open-btn { display:inline-flex; align-items:center; gap:0.4rem; padding:0.45rem 0.75rem; border:none; border-radius:10px; background: linear-gradient(135deg,#38bdf8,#0ea5e9); color:#05222e; font-weight:800; cursor:pointer; }
        .album-open-btn:hover { filter: brightness(1.05); }

        .album-tracks-list .track-row {
            display:grid; grid-template-columns: 32px 1fr 90px 210px; gap:0.75rem; align-items:center;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(59,130,246,0.14);
            border-radius: 12px; padding: 0.5rem 0.6rem;
            transition: background 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .track-row:hover { background: rgba(255,255,255,0.07); border-color: rgba(59,130,246,0.25); }
        .track-index { color:#94a3b8; font-weight:700; text-align:center; }
        .track-title { color:#e5e7eb; font-weight:700; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
        .track-duration { color:#94a3b8; text-align:right; font-variant-numeric: tabular-nums; }
        .track-actions { display:flex; justify-content:flex-end; gap:0.4rem; flex-wrap:wrap; }
        .track-play-btn, .track-plus-btn, .track-heart-btn, .track-download-btn {
            display:inline-flex; align-items:center; gap:0.35rem; border-radius: 10px; cursor:pointer;
            padding: 0.4rem 0.65rem; font-size: 0.8rem; font-weight: 800; border: 1px solid rgba(148,163,184,0.25);
            background: linear-gradient(135deg, rgba(51,65,85,0.8), rgba(15,23,42,0.6)); color:#e5e7eb;
            transition: transform 0.45s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .track-play-btn:hover, .track-plus-btn:hover, .track-heart-btn:hover, .track-download-btn:hover { transform: translateY(-1px); box-shadow: 0 10px 22px rgba(2,6,23,0.35); border-color: rgba(148,163,184,0.4); }
        .track-play-btn { background: linear-gradient(135deg, #34d399, #10b981); color:#052e2b; border:none; }
        .track-plus-btn { background: linear-gradient(135deg, #c4b5fd, #a78bfa); color:#1e1b4b; border:none; }
        .track-heart-btn { background: linear-gradient(135deg, #fda4af, #fb7185); color:#4c0519; border:none; }
        .track-download-btn { background: linear-gradient(135deg, #38bdf8, #0ea5e9); color:#082f49; border:none; }
        .track-download-btn.downloaded { background: linear-gradient(135deg, #10b981, #059669); color:#052e2b; cursor: default; opacity: 0.7; }
        .track-download-btn.downloaded:hover { transform: none; box-shadow: none; }
        .album-empty { color:#94a3b8; text-align:center; padding:1rem 0; }

        /* My Albums heart button */
        .album-heart-btn {
            width: 38px; height: 38px; display:inline-flex; align-items:center; justify-content:center;
            border-radius: 10px; border: 1px solid rgba(236,72,153,0.35); background: rgba(236,72,153,0.12); color:#ec4899; cursor:pointer;
            transition: filter 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .album-heart-btn.added {
            border-color: rgba(236,72,153,0.6); background: rgba(236,72,153,0.2); color:#f472b6;
        }
        .album-heart-btn:hover { filter: brightness(1.08); }

        .books-book-card {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
            display: flex;
            flex-direction: column;
        }

        .books-book-card:hover {
            transform: translateY(-5px);
            border-color: rgba(245, 158, 11, 0.4);
            box-shadow: 0 10px 40px rgba(245, 158, 11, 0.15);
        }

        .books-book-cover {
            position: relative;
            width: 100%;
            aspect-ratio: 2/3;
            min-height: 240px;
            overflow: hidden;
            background: linear-gradient(135deg, #374151, #1f2937);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .books-book-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .books-book-card:hover .books-book-cover img {
            transform: scale(1.08);
        }

        .books-book-cover-placeholder {
            font-size: 3rem;
            color: #9ca3af;
        }

        .books-book-format {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: #fff;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .books-book-info {
            padding: 1rem;
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .books-book-title {
            font-size: 0.95rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 0.4rem;
            line-height: 1.3;
            display: -webkit-box;
            line-clamp: 2;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .books-book-author {
            color: #9ca3af;
            font-size: 0.85rem;
            margin-bottom: 0.75rem;
            display: -webkit-box;
            line-clamp: 1;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .books-book-year {
            display: inline-block;
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .books-book-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: auto;
        }

        .books-read-btn {
            flex: 1;
            padding: 0.6rem 0.5rem;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-weight: 600;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            white-space: nowrap;
        }

        .books-read-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }
        
        .books-read-btn:disabled,
        .books-download-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none !important;
        }
        
        /* Ensure Library "Read" buttons look styled as well */
        .read-btn {
            width: 100%;
            padding: 0.75rem 1rem;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border: none;
            border-radius: 12px;
            color: #fff;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            box-shadow: 0 4px 14px rgba(245, 158, 11, 0.25);
        }
        .read-btn:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 8px 22px rgba(245, 158, 11, 0.35); }
        .read-btn:active { transform: translateY(0); }

        .books-download-btn {
            flex: 1;
            padding: 0.6rem 0.5rem;
            background: rgba(59, 130, 246, 0.15);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            color: #60a5fa;
            font-weight: 600;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            white-space: nowrap;
        }

        .books-download-btn:hover {
            background: rgba(59, 130, 246, 0.25);
            border-color: rgba(59, 130, 246, 0.5);
            color: #93c5fd;
            transform: translateY(-1px);
        }

        /* Responsive book cards */
        @media (max-width: 600px) {
            .books-results-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 0.75rem;
            }
            .books-book-cover {
                min-height: 180px;
            }
            .books-book-info {
                padding: 0.75rem;
            }
            .books-book-title {
                font-size: 0.85rem;
            }
            .books-book-author {
                font-size: 0.75rem;
                margin-bottom: 0.5rem;
            }
            .books-book-actions {
                flex-direction: column;
                gap: 0.4rem;
            }
            .books-read-btn,
            .books-download-btn {
                padding: 0.5rem;
                font-size: 0.75rem;
            }
        }

        /* Books Reader Modal */
        .books-reader-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.98);
            z-index: 9999;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .books-reader-content {
            width: 100%;
            height: 100%;
            max-width: none;
            max-height: none;
            display: flex;
            flex-direction: column;
            background: var(--dark);
            overflow: hidden;
        }
        
        /* Music player modal gets constrained size */
        #music-player-modal .books-reader-content {
            width: 90%;
            max-width: 560px;
            height: auto;
            max-height: 90vh;
        }

        .books-reader-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 2rem;
            background: var(--primary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
            min-height: 70px;
        }

        .books-reader-back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .books-reader-back-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(-2px);
        }

        .books-reader-title {
            color: #fff;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .books-reader-frame-container {
            flex: 1;
            width: 100%;
            height: calc(100vh - 70px);
            position: relative;
            background: #fff;
            overflow: hidden;
        }

        .books-reader-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: #fff;
            display: block;
        }

        /* Ensure no body scroll when reader is open */
        body.books-reader-open {
            overflow: hidden;
        }

        /* IPTV Source Selector */
        .iptv-source-selector {
            background: #1a0f2e;
            padding: 15px 20px;
            border-bottom: 1px solid #2d1b4e;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .iptv-source-label {
            color: #a78bfa;
            font-size: 14px;
            font-weight: 600;
            min-width: 80px;
        }

        .iptv-source-dropdown {
            background: #2d1b4e;
            border: 1px solid #4c1d95;
            border-radius: 8px;
            color: #e5e7eb;
            padding: 8px 12px;
            font-size: 14px;
            min-width: 300px;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .iptv-source-dropdown:hover {
            border-color: #7c3aed;
            background: #362159;
        }

        .iptv-source-dropdown:focus {
            outline: none;
            border-color: #a78bfa;
            box-shadow: 0 0 0 3px rgba(167, 139, 250, 0.1);
        }

        .iptv-source-dropdown option {
            background: #2d1b4e;
            color: #e5e7eb;
            padding: 8px 12px;
            border: none;
        }

        .iptv-source-dropdown option:hover {
            background: #4c1d95;
        }

        .iptv-source-dropdown option:selected {
            background: #7c3aed;
            color: #ffffff;
        }

        /* Server Selection Modal */
        .server-selection-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            /* Match page background instead of pure black overlay */
            background: var(--dark);
            z-index: 9998;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        .server-selection-content {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: var(--dark);
            overflow: visible;
        }

        .server-selection-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 2rem;
            background: var(--primary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
            min-height: 70px;
        }

        .server-selection-back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .server-selection-back-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(-2px);
        }

        .server-selection-title {
            color: #fff;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .server-selection-body {
            flex: 1;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            /* Make the server selection (and embedded iframe) a bit wider */
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .server-selection-info {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .media-info {
            display: flex;
            gap: 1.5rem;
            align-items: flex-start;
        }

        .media-poster {
            width: 120px;
            height: 180px;
            border-radius: 12px;
            object-fit: cover;
            background: linear-gradient(135deg, #374151, #1f2937);
        }

        .media-details {
            flex: 1;
        }

        .media-details h4 {
            font-size: 1.5rem;
            color: #fff;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .media-details p {
            color: #9ca3af;
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .media-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .media-year {
            background: rgba(168, 85, 247, 0.2);
            color: #a855f7;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .media-rating {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .server-dropdown-section {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 2rem;
        }

        .server-dropdown-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #fff;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .server-dropdown-container {
            position: relative;
        }

        .server-dropdown {
            width: 100%;
            padding: 1rem 1.5rem;
            padding-right: 4.5rem; /* extra space so custom chevron never overlaps scrollbar */
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: #fff;
            font-size: 1rem;
            font-weight: 500;
            appearance: none;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-height: 200px;
            overflow-y: auto;
            /* Make the dropdown scrollbar easier to see */
            scrollbar-width: thin; /* Firefox */
            scrollbar-color: #22d3ee rgba(255, 255, 255, 0.12); /* thumb color | track color */
            scrollbar-gutter: stable both-edges; /* reserve space for scrollbar (Chromium/Firefox) */
        }

        /* WebKit-based scrollbars (Chromium/Electron) */
        .server-dropdown::-webkit-scrollbar {
            width: 14px; /* thicker for visibility */
        }

        .server-dropdown::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.5); /* darker track for contrast */
            border-radius: 8px;
        }

        .server-dropdown::-webkit-scrollbar-thumb {
            background: #22d3ee; /* bright cyan for high contrast */
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.15);
        }

        .server-dropdown::-webkit-scrollbar-thumb:hover {
            background: #06b6d4;
        }

        .server-dropdown option {
            background: var(--dark);
            color: #fff;
            padding: 0.5rem;
        }

        .server-dropdown:focus {
            outline: none;
            border-color: rgba(168, 85, 247, 0.5);
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.15);
        }

        .server-dropdown option {
            background: var(--primary);
            color: #fff;
            padding: 1rem;
            font-weight: 500;
        }

        .server-dropdown-arrow {
            position: absolute;
            right: 2.5rem; /* shift left so it never covers the scrollbar */
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
            pointer-events: none;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .server-dropdown:focus + .server-dropdown-arrow {
            transform: translateY(-50%) rotate(180deg);
        }

        .server-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .server-watch-btn {
            flex: 1;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
            border: none;
            border-radius: 12px;
            color: #fff;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-width: 200px;
        }

        .server-watch-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
        }

        .server-torrent-btn {
            padding: 1rem 2rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: #9ca3af;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-width: 180px;
        }

        .server-torrent-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            color: #fff;
        }

        /* Embedded Video Player Section */
        .server-video-section {
            margin-top: 2rem;
            background: var(--dark);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .server-video-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: var(--dark);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .server-video-header h4 {
            color: #fff;
            margin: 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .server-video-close {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .server-video-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #e50914;
        }

        .server-video-container {
            position: relative;
            width: 100%;
            /* Make the embedded server player noticeably larger and responsive */
            height: 70vh;
            min-height: 480px;
            /* Match the app background so the area under the iframe blends in */
            background: var(--dark);
        }

        .server-video-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .server-video-controls {
            padding: 1rem 1.5rem;
            background: var(--dark);
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        /* Video Player Modal */
        .video-player-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.98);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .video-player-content {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: var(--dark);
            overflow: hidden;
        }

        .video-player-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 2rem;
            background: var(--primary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
            min-height: 70px;
        }

        .video-player-back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .video-player-back-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(-2px);
        }

        .video-player-title {
            color: #fff;
            font-size: 1.2rem;
            font-weight: 600;
            flex: 1;
            margin: 0 2rem;
        }

        .video-player-controls {
            display: flex;
            gap: 0.5rem;
        }

        .video-player-control-btn {
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .video-player-control-btn:hover {
            background: rgba(255, 255, 255, 0.12);
        }

        .video-player-frame-container {
            flex: 1;
            width: 100%;
            height: calc(100vh - 70px);
            position: relative;
            background: #000;
            overflow: hidden;
        }

        .video-player-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: #000;
            display: block;
        }

        /* Prevent body scroll when modals are open */
        body.server-modal-open,
        body.video-modal-open {
            overflow: hidden;
        }

        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(30px) scale(0.95); }
            60% { opacity: 0.8; transform: translateY(-5px) scale(1.01); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* BookTorrio Page Styles */
        .booktorrio-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            justify-content: center;
        }

        /* EPUB Reader Styles */
        #epubReaderOverlay {
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            /* Solid bar theming variables (no transparency) */
            --bar-bg: #202225; /* solid by default (dark) */
            --bar-border: rgba(255,255,255,0.1);
            --bar-btn-bg: #2b2b2b;       /* dark default */
            --bar-btn-border: #3a3a3a;
            --bar-input-bg: #1f1f1f;
            --bar-input-border: #3a3a3a;
        }
        /* Light theme overrides */
        #epubReaderOverlay.theme-light {
            --bar-bg: #ffffff;
            --bar-border: rgba(0,0,0,0.08);
            --bar-btn-bg: #f3f4f6;      /* slate-100 */
            --bar-btn-border: #e5e7eb;  /* slate-200 */
            --bar-input-bg: #ffffff;
            --bar-input-border: #e5e7eb;
        }
        /* Night theme overrides */
        #epubReaderOverlay.theme-night {
            --bar-bg: #000000;
            --bar-border: rgba(255,255,255,0.12);
            --bar-btn-bg: #111111;
            --bar-btn-border: #262626;
            --bar-input-bg: #0b0b0b;
            --bar-input-border: #262626;
        }
        .reader-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            padding: 0.75rem 1rem;
            background-color: var(--bar-bg) !important;
            /* Solid header bar, no transparency */
            backdrop-filter: none;
            border-bottom: 1px solid var(--bar-border);
            box-shadow: 0 2px 6px rgba(0,0,0,0.22);
            position: sticky;
            top: 0;
            z-index: 2100;
        }
        .reader-esc-hint {
            color: var(--text);
            font-size: 0.85rem;
            white-space: nowrap;
            /* Make the hint itself solid (no transparency) */
            background: var(--bar-btn-bg);
            border: 1px solid var(--bar-btn-border);
            padding: 0.35rem 0.6rem;
            border-radius: 6px;
        }
        .reader-title { 
            text-align: center; 
            color: var(--text); 
            font-weight: 600; 
            flex: 1;
        }
        #readerContainer { 
            flex: 1; 
            overflow-y: auto; 
            overflow-x: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Bottom navigation bar */
        .reader-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            padding: 0.75rem 1rem;
            background-color: var(--bar-bg) !important;
            /* Solid footer bar, no transparency */
            backdrop-filter: none;
            border-top: 1px solid var(--bar-border);
            box-shadow: 0 -2px 6px rgba(0,0,0,0.22);
            position: sticky;
            bottom: 0;
            z-index: 2100;
        }
        .reader-nav-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
            justify-content: center;
        }
        .reader-chapter-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text);
        }
        .reader-chapter-controls .chapter-count-label {
            font-size: 0.9rem;
            opacity: 0.8;
            white-space: nowrap;
        }
        .reader-chapter-controls input[type="number"] {
            width: 84px;
            height: 36px;
            padding: 0 0.5rem;
            border-radius: 6px;
            border: 1px solid var(--bar-input-border);
            background: var(--bar-input-bg);
            color: var(--text);
            outline: none;
        }
        .reader-chapter-controls input[type="number"]::placeholder {
            color: rgba(255,255,255,0.55);
        }
        .reader-nav-btn, .reader-gear, .reader-back-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 44px; 
            height: 44px;
            padding: 0 1rem;
            border-radius: 8px;
            border: 1px solid var(--bar-btn-border);
            background: var(--bar-btn-bg);
            color: var(--text);
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            gap: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
        }
        .reader-nav-btn {
            min-width: 44px;
            padding: 0;
        }
        .reader-nav-btn:hover:not(:disabled), .reader-gear:hover, .reader-back-btn:hover {
            background: #6d28d9; /* solid purple on hover */
            border-color: #7c3aed;
            color: #fff;
            transform: translateY(-4px) scale(1.02);
        }
        .reader-back-btn:hover {
            background: #dc2626; /* solid red for back hover */
            border-color: #ef4444;
            color: #fff;
        }
        .reader-nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        .reader-settings {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 340px;
            max-height: 80vh;
            background: var(--bar-bg);
            color: var(--text);
            border: 1px solid var(--bar-border);
            border-radius: 12px;
            transform: translateY(0);
            transition: transform 0.3s ease, opacity 0.3s ease;
            padding: 1.5rem;
            z-index: 2200;
            box-shadow: 0 5px 25px rgba(0,0,0,0.5);
            opacity: 1;
            pointer-events: auto;
            overflow-y: auto;
        }
        .reader-settings.hidden { 
            transform: translateY(20px); 
            opacity: 0; 
            pointer-events: none; 
        }
        .settings-row.justify { justify-content: space-between; }
        .align-btn { 
            flex: 1; 
            padding: 0.5rem; 
            border: 1px solid var(--bar-btn-border); 
            background: var(--bar-btn-bg); 
            color: var(--text); 
            cursor: pointer; 
            border-radius: 6px; 
            display: flex; 
            justify-content: center; 
            align-items: center;
        }
        .align-btn.active { background: var(--vlc-orange); color: #fff; border-color: var(--vlc-orange); }
        .align-btn:not(:last-child) { margin-right: 0.5rem; }
        .reader-settings-section { margin-bottom: 1rem; }
        .settings-row { display: flex; gap: 0.5rem; }
        .theme-btn { padding: 0.5rem 0.75rem; border-radius: 6px; border: 1px solid rgba(255,255,255,0.15); background: rgba(255,255,255,0.06); color: #eee; cursor: pointer; }

        #focusRuler {
            position: absolute;
            left: 0;
            right: 0;
            height: 60px;
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.85);
            z-index: 50;
            pointer-events: none;
            display: none;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        /* Themes for overlay container */
        .theme-light { --bg: #ffffff; --text: #111111; }
        .theme-dark  { --bg: #202225; --text: #f2f2f2; }
        .theme-night { --bg: #000000; --text: #e5e7eb; }
        
        .booktorrio-tab-btn {
            padding: 1rem 2rem;
            border-radius: 12px;
            border: 2px solid rgba(168, 85, 247, 0.3);
            background: rgba(42, 24, 71, 0.4);
            color: var(--light);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            backdrop-filter: blur(10px);
        }
        
        .booktorrio-tab-btn:hover {
            border-color: #06b6d4;
            background: rgba(6, 182, 212, 0.1);
        }
        
        .booktorrio-tab-btn.active {
            border-color: #06b6d4;
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
        }
        
        .booktorrio-tab {
            display: block;
        }
        
        .search-container-books {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .search-input-books {
            flex: 1;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            border: 2px solid rgba(168, 85, 247, 0.3);
            background: rgba(42, 24, 71, 0.4);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            backdrop-filter: blur(10px);
        }
        
        .search-input-books:focus {
            outline: none;
            border-color: var(--vlc-orange);
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.2);
        }
        
        .search-btn-books {
            padding: 1rem 2rem;
            border-radius: 12px;
            border: none;
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .search-btn-books:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(6, 182, 212, 0.4);
        }
        
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .book-card {
            background: rgba(42, 24, 71, 0.4);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 16px;
            padding: 1.5rem;
            backdrop-filter: blur(15px);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .book-card:hover {
            transform: translateY(-4px);
            border-color: #06b6d4;
            box-shadow: 0 8px 25px rgba(6, 182, 212, 0.2);
        }
        
        .book-cover-container {
            position: relative;
            width: 100%;
            margin-bottom: 1rem;
        }
        
        .book-cover {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 12px;
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            display: block;
        }
        
        .playtorrio-logo {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 50%;
            height: 50%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 2px;
            border-radius: 0 0 12px 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            backdrop-filter: blur(10px);
            border-left: 2px solid rgba(139, 92, 246, 0.5);
            border-top: 2px solid rgba(139, 92, 246, 0.5);
            box-shadow: 
                0 -2px 15px rgba(139, 92, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 4px 10px rgba(0, 0, 0, 0.3);
            z-index: 10;
            pointer-events: none;
            overflow: hidden;
        }
        
        .playtorrio-logo::before {
            content: '';
            font-size: 1.8rem;
            color: #8b5cf6;
            filter: drop-shadow(0 2px 6px rgba(139, 92, 246, 0.8));
            animation: pulse 2s ease-in-out infinite;
            margin-bottom: 2px;
        }
        
        .playtorrio-logo::after {
            content: 'AUDIOBOOK';
            font-size: 0.65rem;
            font-weight: 600;
            letter-spacing: 2.5px;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
            border-top: 1px solid rgba(139, 92, 246, 0.3);
            padding-top: 4px;
            width: 90%;
            text-align: center;
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
        }
        
        .book-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--light);
            margin-bottom: 0.5rem;
            line-height: 1.3;
            display: -webkit-box;
            line-clamp: 2;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .book-author {
            color: #06b6d4;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .book-details {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .book-tag {
            background: rgba(6, 182, 212, 0.2);
            color: #06b6d4;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            border: 1px solid rgba(6, 182, 212, 0.3);
        }
        
        .book-tag.epub-highlight {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-color: #10b981;
        }
        
        .download-btn {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 12px;
            border: none;
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .download-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(6, 182, 212, 0.4);
        }
        
        .search-placeholder {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: var(--gray);
        }
        
        .search-placeholder h3 {
            color: var(--light);
            margin-bottom: 0.5rem;
        }
        
        /* Spinner for loading */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(6, 182, 212, 0.3);
            border-left-color: #06b6d4;
            border-radius: 50%;
            animation: spin 1.4s cubic-bezier(0.65, 0, 0.35, 1) infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* EPUB Download Modal Styles */
        .epub-download-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(5px);
        }
        
        .epub-modal-content {
            background: linear-gradient(135deg, var(--primary) 0%, #1a0d2e 100%);
            border-radius: 16px;
            border: 1px solid rgba(168, 85, 247, 0.3);
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }
        
        .epub-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid rgba(168, 85, 247, 0.2);
        }
        
        .epub-modal-header h3 {
            color: var(--light);
            margin: 0;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .epub-modal-close {
            background: none;
            border: none;
            color: var(--gray);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .epub-modal-close:hover {
            background: rgba(168, 85, 247, 0.2);
            color: var(--light);
        }
        
        .epub-modal-body {
            padding: 1.5rem;
        }
        
        .epub-download-instruction {
            margin-bottom: 1.5rem;
        }
        
        .epub-download-instruction p {
            color: var(--light);
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .epub-path-container {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid rgba(168, 85, 247, 0.2);
            margin-bottom: 1rem;
        }
        
        .epub-path-container code {
            flex: 1;
            color: #06b6d4;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            word-break: break-all;
        }
        
        .copy-path-btn {
            background: rgba(6, 182, 212, 0.2);
            border: 1px solid #06b6d4;
            color: #06b6d4;
            padding: 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .copy-path-btn:hover {
            background: #06b6d4;
            color: white;
        }
        
        .epub-note {
            font-size: 0.9rem;
            color: var(--gray);
            font-style: italic;
        }
        
        .epub-modal-actions {
            display: flex;
            justify-content: center;
        }
        
        .epub-download-btn {
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }
        
        .epub-download-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 20px rgba(6, 182, 212, 0.4);
        }

        /* VLC Player Styles */
        .vlc-player-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--vlc-dark);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            /* Prevent any child from increasing the viewport height */
            overflow: hidden;
        }
        
        .vlc-player-container.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .vlc-player-header {
            background-color: rgba(0, 0, 0, 0.8);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--vlc-orange);
            position: sticky;
            top: 0;
            z-index: 2100;
        }
        
        .vlc-player-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            position: relative;
            z-index: 2101;
        }
        
        .vlc-player-close {
            background: var(--vlc-orange);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
            position: relative;
            z-index: 2102;
            pointer-events: auto;
        }
        
        .vlc-player-close:hover {
            background: #e55a00;
        }
        
        .vlc-player-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--vlc-dark);
            /* Allow inner flex children to shrink within viewport */
            min-height: 0;
            min-width: 0;
            position: relative;
            z-index: 1;
        }
        
        .file-selector {
            background: rgba(0, 0, 0, 0.5);
            padding: 1rem 2rem;
            border-bottom: 1px solid #444;
            position: relative;
            z-index: 1;
        }
        
        .file-selector h3 {
            color: var(--vlc-orange);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .file-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            max-height: 400px;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 0.5rem;
        }

        /* Custom scrollbar for file list */
        .file-list::-webkit-scrollbar {
            width: 8px;
        }

        .file-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .file-list::-webkit-scrollbar-thumb {
            background: var(--vlc-orange);
            border-radius: 4px;
        }

        .file-list::-webkit-scrollbar-thumb:hover {
            background: #e55a00;
        }

        /* MPV controls layout and spacing */
        #mpvControls {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 0 1.25rem;
            position: relative;
            z-index: 0;
        }

        #mpvControls .vlc-btn { width: auto; }
        
        .file-item {
            position: relative;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid transparent;
        }
        
        .file-item:hover {
            background: rgba(255, 105, 0, 0.2);
            border-color: var(--vlc-orange);
        }
        
        .file-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: white;
            white-space: normal;
            word-break: break-word;
            font-size: 0.9rem;
        }

        .file-name-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--dark);
            color: var(--light);
            padding: 0.5rem;
            border-radius: 4px;
            font-size: 0.9rem;
            white-space: normal;
            width: max-content;
            max-width: 300px;
            text-align: center;
            z-index: 10;
            pointer-events: none;
        }
        
        .file-size {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .vlc-player-area {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            position: relative;
            /* Ensure contained media never pushes layout */
            min-height: 0;
            min-width: 0;
            overflow: hidden;
            z-index: 1;
        }
        
        .vlc-loading {
            color: var(--vlc-orange);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
            z-index: 2;
            pointer-events: none;
        }
        
        .vlc-loading i {
            animation: spin 1.4s cubic-bezier(0.65, 0, 0.35, 1) infinite;
        }
        
        /* Base button styles for MPV/WCJS action buttons */
        .vlc-btn {
            background: var(--vlc-orange);
            border: none;
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }

        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            padding: 2rem 2rem 1rem;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 3;
        }
        
        .vlc-btn:hover {
            background: #e55a00;
            transform: translateY(-4px) scale(1.02);
        }
        
        .vlc-btn.secondary {
            background: var(--secondary);
        }
        
        .vlc-btn.secondary:hover {
            background: #0199c7;
        }
        
        .subtitle-controls {
            background: rgba(0, 0, 0, 0.5);
            padding: 1rem 2rem;
            flex-direction: column;
            position: relative;
            z-index: 0;
            max-height: 280px;
            overflow: hidden;
        }
        
        .subtitle-controls h4 {
            color: var(--vlc-orange);
            margin-bottom: 1rem;
            flex-shrink: 0;
        }
        
        .subtitle-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            max-height: 200px;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 0.5rem;
            flex-shrink: 1;
            min-height: 0;
        }

        /* Custom scrollbar for subtitle list */
        .subtitle-list::-webkit-scrollbar {
            width: 8px;
        }

        .subtitle-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .subtitle-list::-webkit-scrollbar-thumb {
            background: var(--vlc-orange);
            border-radius: 4px;
        }

        .subtitle-list::-webkit-scrollbar-thumb:hover {
            background: #e55a00;
        }
        
        .subtitle-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid transparent;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .subtitle-item:hover {
            background: rgba(255, 105, 0, 0.2);
            border-color: var(--vlc-orange);
        }

        .subtitle-item.selected {
            border-color: var(--success);
            background-color: rgba(40, 167, 69, 0.2);
        }
        
        .subtitle-lang {
            font-weight: 600;
            color: white;
            flex-grow: 1;
        }

        /* Custom Video Player Styles */
        .custom-player-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 3000;
            display: flex;
            flex-direction: column;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            /* Lock overlay to viewport */
            overflow: hidden;
        }

        .custom-player-container.active {
            opacity: 1;
            pointer-events: all;
        }

        .player-header {
            background: none;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: none;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            z-index: 5;
        }

        .player-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .player-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .subtitle-upload {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .subtitle-upload input[type="file"] {
            position: absolute;
            left: -9999px;
        }

        .upload-btn {
            background: var(--secondary);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .upload-btn:hover {
            background: #0199c7;
            transform: translateY(-1px);
        }

        .close-player-btn {
            background: var(--danger);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .close-player-btn:hover {
            background: #c82333;
            transform: translateY(-1px);
        }

        .video-container {
            flex: 1;
            position: relative;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Critical for flex children so they don't overflow the viewport */
            min-height: 0;
            min-width: 0;
            overflow: hidden;
        }

        .custom-video {
            width: 100%;
            height: 100%;
            object-fit: contain; /* Always fit inside container */
            /* Ensure the video stays beneath overlays */
            z-index: 1;
        }
        
        /* Video.js subtitle positioning and styling */
        .video-js .vjs-text-track-display {
            bottom: 8em !important;
            pointer-events: none;
        }
        
        .video-js .vjs-text-track-cue {
            pointer-events: auto;
        }
        
        /* Hide Video.js error messages */
        .video-js .vjs-error-display,
        .video-js .vjs-modal-dialog {
            display: none !important;
        }

        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            padding: 2rem 2rem 1rem;
            /* Always visible to avoid being pushed off-screen */
            transform: translateY(0);
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 2;
        }

        /* Auto-hide behavior scoped to custom player only */
        .custom-player-container .video-controls { transform: translateY(100%); opacity: 0; pointer-events: none; }
        .custom-player-container .video-container.show-controls .video-controls,
        .custom-player-container .video-controls.force-visible {
            transform: translateY(0);
            opacity: 1;
            pointer-events: auto;
        }

        /* Hide player header (title and close button) when controls are hidden */
        .custom-player-container .player-header { 
            transform: translateY(-100%); 
            opacity: 0; 
            pointer-events: none; 
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .custom-player-container.show-controls .player-header,
        .custom-player-container .player-header.force-visible {
            transform: translateY(0);
            opacity: 1;
            pointer-events: auto;
        }

        /* Hide cursor when controls are hidden */
        .custom-player-container:not(.show-controls) {
            cursor: none;
        }
        .custom-player-container:not(.show-controls) * {
            cursor: none;
        }

        .progress-container {
            margin-bottom: 1rem;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            cursor: pointer;
            position: relative;
        }

        .progress-filled {
            height: 100%;
            background: var(--vlc-orange);
            border-radius: 3px;
            width: 0%;
            transition: width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .progress-time {
            display: flex;
            justify-content: space-between;
            color: white;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .control-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }
        .control-left,
        .control-right { display:flex; align-items:center; gap:1rem; }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.8rem;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            width: 50px;
            height: 50px;
        }

        .control-btn:hover {
            background: var(--vlc-orange);
            transform: scale(1.12);
        }

        .control-btn.play-pause {
            background: var(--vlc-orange);
            font-size: 1.5rem;
            width: 60px;
            height: 60px;
        }

        .control-btn.play-pause:hover {
            background: #e55a00;
        }

        .fullscreen-btn {
            position: absolute;
            right: 1rem;
            bottom: 1rem;
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--vlc-orange);
            font-size: 1.5rem;
            z-index: 2; /* below controls, above video */
        }

        .subtitle-display {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 1.1rem;
            font-weight: 500;
            text-align: center;
            max-width: 80%;
            display: none;
        }
        
        .notification {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, rgba(40, 40, 40, 0.95) 0%, rgba(30, 30, 30, 0.95) 100%);
            color: var(--text-primary);
            padding: 1.25rem 1.75rem;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 10000;
            transform: translateY(-100px);
            opacity: 0;
            transition: all 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-width: 400px;
            min-width: 300px;
            font-weight: 500;
            font-size: 0.95rem;
            line-height: 1.4;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            /* Allow clicks to pass through so it never blocks UI like the music search bar */
            pointer-events: none;
        }

        .notification.success {
            border-left: 4px solid #22c55e;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(40, 40, 40, 0.95) 100%);
        }

        .notification.success::before {
            content: '';
            color: #22c55e;
            font-weight: bold;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .notification.error {
            border-left: 4px solid #ef4444;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(40, 40, 40, 0.95) 100%);
        }

        .notification.error::before {
            content: '';
            color: #ef4444;
            font-weight: bold;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .notification.info {
            border-left: 4px solid #3b82f6;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(40, 40, 40, 0.95) 100%);
        }

        .notification.info::before {
            content: '';
            color: #3b82f6;
            font-weight: bold;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .notification.warning {
            border-left: 4px solid #f59e0b;
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(40, 40, 40, 0.95) 100%);
        }

        .notification.warning::before {
            content: '';
            color: #f59e0b;
            font-weight: bold;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        /* Subtitles menu panel */
        .subs-panel {
            position: absolute;
            right: 1rem;
            bottom: 6rem;
            width: 340px;
            max-height: 40vh;
            overflow: auto;
            background: rgba(0,0,0,0.9);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 8px;
            padding: 0.5rem;
            display: none;
            z-index: 10;
        }
        .subs-item { display:flex; align-items:center; justify-content:space-between; background: rgba(255,255,255,0.06); color:#fff; padding:0.5rem 0.6rem; border-radius:6px; margin:0.35rem 0; cursor:pointer; }
        .subs-item:hover { background: rgba(168,85,247,0.25); }
        .subs-badge { font-size: 0.75rem; color:#ccc; }
        .subs-source { font-size: 0.75rem; opacity: 0.8; margin-left: 0.4rem; }
        .row-spread { display:flex; align-items:center; justify-content:space-between; gap:0.5rem; }
        .subs-header { display:flex; align-items:center; justify-content:space-between; color:#fff; margin-bottom:0.25rem; }
        .subs-help { color:#bbb; font-size:0.8rem; margin-bottom:0.25rem; }
        .menu-actions { display:flex; align-items:center; gap:0.5rem; }
        .menu-refresh { background: rgba(255,255,255,0.15); border:none; color:#fff; padding:0.2rem 0.5rem; border-radius:4px; cursor:pointer; }
        
        /* Subtitle Upload and Customization Styles */
        .subs-upload { display:flex; flex-direction:column; gap:0.4rem; margin:0.5rem 0; background: rgba(255,255,255,0.06); padding:0.5rem; border-radius:6px; }
        .subs-upload-btn { background: var(--vlc-orange); color:#fff; border:none; padding:0.45rem 0.75rem; border-radius:6px; cursor:pointer; display:flex; align-items:center; gap:0.4rem; font-weight:600; justify-content:center; font-size:0.85rem; }
        .subs-upload-btn:hover { background:#e55a00; }
        .subs-divider { height:1px; background: rgba(255,255,255,0.12); margin:0.6rem 0; }
        .subs-settings { display:flex; flex-direction:column; gap:0.5rem; margin:0.5rem 0; }
        .subs-setting-row { display:flex; align-items:center; gap:0.5rem; font-size:0.8rem; color:#eee; }
        .subs-setting-row label { flex: 0 0 85px; }
        .subs-setting-row input[type="range"] { flex:1; }
        .subs-setting-row input[type="color"] { width:42px; height:28px; border:none; padding:0; background:none; cursor:pointer; }
        .subs-setting-row select { 
            flex:1; 
            padding:0.4rem 0.6rem; 
            border-radius:6px; 
            border:1px solid rgba(255,255,255,0.15); 
            background: rgba(255,255,255,0.08); 
            color:#fff; 
            font-size:0.85rem;
            font-weight:500;
            cursor:pointer;
        }
        .subs-setting-row select option {
            background: #1a1a1a;
            color: #fff;
        }
        .subs-setting-value { min-width:46px; text-align:right; color:#bbb; font-size:0.75rem; }
        
        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* ===== TRAKT PAGE STYLES ===== */
        .trakt-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .trakt-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 16px;
            backdrop-filter: blur(10px);
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .trakt-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 32px rgba(237, 28, 36, 0.2);
            border-color: rgba(237, 28, 36, 0.3);
        }

        .trakt-card-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            background: linear-gradient(90deg, rgba(237, 28, 36, 0.1) 0%, transparent 100%);
        }

        .trakt-card-header h3 {
            margin: 0;
            color: var(--text-primary);
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .trakt-card-header i {
            color: #ed1c24;
            font-size: 1.1rem;
        }

        .trakt-card-body {
            padding: 2rem;
        }

        .trakt-status-card {
            border: 2px solid rgba(237, 28, 36, 0.3);
        }

        .trakt-status-section {
            text-align: center;
        }

        .trakt-status-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .trakt-status-indicator.connected {
            color: #22c55e;
        }

        .trakt-status-indicator.disconnected {
            color: #ef4444;
        }

        .trakt-status-indicator i {
            font-size: 1.3rem;
        }

        .trakt-description {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .trakt-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: none;
            cursor: pointer;
            font-size: 0.95rem;
        }

        .trakt-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .trakt-btn-primary {
            background: linear-gradient(135deg, #ed1c24 0%, #d41920 100%);
            color: white;
        }

        .trakt-btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #d41920 0%, #b8161c 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(237, 28, 36, 0.4);
        }

        .trakt-btn-secondary {
            background: rgba(255,255,255,0.1);
            color: var(--text-primary);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .trakt-btn-secondary:hover:not(:disabled) {
            background: rgba(255,255,255,0.15);
            border-color: rgba(255,255,255,0.3);
        }

        .trakt-btn-info {
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
        }

        .trakt-btn-info:hover:not(:disabled) {
            background: linear-gradient(135deg, #0284c7 0%, #0369a1 100%);
        }

        .trakt-user-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Device Code Panel */
        .trakt-device-code {
            margin-top: 2rem;
            padding: 2rem;
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            border: 1px solid rgba(237, 28, 36, 0.2);
        }

        .trakt-code-header h4 {
            margin: 0 0 1.5rem 0;
            color: var(--text-primary);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .trakt-code-content {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .trakt-code-display {
            text-align: center;
        }

        .trakt-code-display label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .trakt-code-value {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .trakt-code-value span {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 1.5rem;
            font-weight: 800;
            background: rgba(255,255,255,0.1);
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            border: 2px solid rgba(237, 28, 36, 0.3);
            color: #ed1c24;
            letter-spacing: 0.2em;
        }

        .trakt-copy-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: var(--text-primary);
            padding: 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .trakt-copy-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .trakt-verify-section {
            text-align: center;
        }

        .trakt-verify-section p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .trakt-verify-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .trakt-status-message {
            padding: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            border-left: 4px solid #ed1c24;
        }

        .trakt-status-message span {
            color: var(--text-secondary);
            font-style: italic;
        }

        /* Actions Grid */
        .trakt-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .trakt-action-card {
            cursor: pointer;
            padding: 2rem;
            text-align: center;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

        .trakt-action-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ed1c24 0%, #d41920 100%);
            transform: scaleX(0);
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .trakt-action-card:hover::before {
            transform: scaleX(1);
        }

        .trakt-action-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(237, 28, 36, 0.15);
        }

        .trakt-action-icon {
            margin-bottom: 1rem;
        }

        .trakt-action-icon i {
            font-size: 2.5rem;
            color: #ed1c24;
        }

        .trakt-action-content h4 {
            margin: 0 0 0.5rem 0;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .trakt-action-content p {
            margin: 0 0 1rem 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .trakt-action-count {
            display: inline-block;
            background: linear-gradient(135deg, #ed1c24 0%, #d41920 100%);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .trakt-action-badge {
            display: inline-block;
            background: rgba(255,255,255,0.1);
            color: var(--text-primary);
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Settings Grid */
        .trakt-settings-grid {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .trakt-setting-item {
            padding: 1.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .trakt-setting-item:hover {
            background: rgba(255,255,255,0.08);
            border-color: rgba(237, 28, 36, 0.3);
        }

        .trakt-setting-main {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .trakt-setting-content h4 {
            margin: 0 0 0.25rem 0;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .trakt-setting-content p {
            margin: 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        /* Custom Toggle Switch */
        .trakt-toggle {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
            flex-shrink: 0;
        }

        .trakt-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .trakt-toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255,255,255,0.2);
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .trakt-toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-radius: 50%;
        }

        .trakt-toggle input:checked + .trakt-toggle-slider {
            background: linear-gradient(135deg, #ed1c24 0%, #d41920 100%);
            border-color: #ed1c24;
        }

        .trakt-toggle input:checked + .trakt-toggle-slider:before {
            transform: translateX(26px);
        }

        /* Activity List */
        .trakt-activity-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .trakt-activity-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            border-left: 4px solid #ed1c24;
        }

        .trakt-activity-icon {
            flex-shrink: 0;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ed1c24 0%, #d41920 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .trakt-activity-content {
            flex: 1;
        }

        .trakt-activity-title {
            margin: 0 0 0.25rem 0;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .trakt-activity-meta {
            margin: 0;
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .trakt-container {
                padding: 1rem;
                gap: 1.5rem;
            }

            .trakt-card-body {
                padding: 1.5rem;
            }

            .trakt-actions-grid {
                grid-template-columns: 1fr;
            }

            .trakt-verify-actions {
                flex-direction: column;
                align-items: center;
            }

            .trakt-user-actions {
                flex-direction: column;
                align-items: center;
            }

            .trakt-setting-main {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }
        }
        /* ===== END TRAKT PAGE STYLES ===== */

        .error-message {
            background-color: var(--danger);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Genres pages styles */
        .genre-card {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 120px;
            text-align: center;
        }
        .genre-title {
            color: var(--light);
            font-size: 1.2rem;
        }
        .genre-chip {
            display: inline-block;
            margin-top: 0.5rem;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.75rem;
            background: rgba(255,255,255,0.1);
            color: var(--tertiary);
            border: 1px solid rgba(255,255,255,0.15);
        }
        .genre-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        .genre-controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        .toggle-btn {
            padding: 0.5rem 1rem;
            border-radius: 30px;
            border: 2px solid var(--vlc-orange);
            background: transparent;
            color: var(--vlc-orange);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .toggle-btn.active {
            background: var(--vlc-orange);
            color: #fff;
        }
        
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .search-container {
                margin: 1rem 0;
                width: 100%;
            }
            
            .user-actions {
                gap: 0.5rem;
                flex-wrap: nowrap; /* Keep on same line */
            }
            
            .user-actions .btn {
                padding: 0.5rem 0.75rem;
                font-size: 0.8rem;
                min-height: 34px;
            }
            
            .user-actions .btn i {
                font-size: 0.85rem;
            }
            
            /* Hide text on very small screens, show icons only */
            @media (max-width: 600px) {
                .user-actions {
                    gap: 0.4rem;
                }
                
                .user-actions .btn span {
                    display: none;
                }
                .user-actions .btn {
                    padding: 0.5rem;
                    justify-content: center;
                    min-height: 32px;
                    font-size: 0.9rem;
                }
            }
            
            .modal-header-content {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
            
            .modal-poster {
                width: 150px;
                height: 225px;
            }
            
            .modal-title {
                font-size: 1.8rem;
            }
            
            .file-list {
                grid-template-columns: 1fr;
            }
            
            .video-controls {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
            .vlc-btn { /* mobile sizing override only */
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }
            .player-header {
                z-index: 3;
                padding: 0.5rem 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .player-actions {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .control-buttons {
                gap: 0.5rem;
            }

            .control-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }

            .control-btn.play-pause {
                width: 50px;
                height: 50px;
                font-size: 1.3rem;
            }

            .api-setup-content {
                padding: 2rem;
            }

            .api-setup-buttons {
                flex-direction: column;
            }

            .settings-content {
                padding: 1.5rem;
            }

            .settings-buttons {
                flex-direction: column;
            }
        }

        /* ========================================
           NEW UI STYLES - Modern App Interface
           ======================================== */
        
        /* OLD UI: Show app-container but without flex layout, hide sidebar */
        body.ui-old {
            display: block;
            height: auto;
            overflow: visible;
        }
        
        body.ui-old .app-container {
            display: block;
            height: auto;
        }
        
        body.ui-old .app-sidebar {
            display: none !important;
        }
        
        body.ui-old .app-main {
            display: block;
            overflow: visible;
            height: auto;
        }
        
        body.ui-old header {
            position: sticky;
            top: 0;
        }
        
        body.ui-old main {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1rem;
            overflow: visible;
        }
        
        /* OLD UI: Button styles for details modal */
        body.ui-old .secondary-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
        }
        
        body.ui-old .btn-icon-only {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        body.ui-old .btn-icon-only:hover {
            background: var(--vlc-orange);
            border-color: var(--vlc-orange);
            transform: scale(1.05);
        }
        
        body.ui-old .btn-icon-only i {
            font-size: 1.2rem;
        }
        
        /* Done Watching Button in modal - green when done */
        body.ui-old .btn-icon-only.done-watching-btn.is-done {
            background: #22c55e;
            border-color: #22c55e;
        }
        
        body.ui-old .btn-icon-only.done-watching-btn.is-done:hover {
            background: #16a34a;
            border-color: #16a34a;
        }
        
        body.ui-old .modal-actions .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        body.ui-old .modal-actions .btn-primary {
            background: var(--vlc-orange);
            border: none;
            color: white;
        }
        
        body.ui-old .modal-actions .btn-primary:hover {
            background: #e65c00;
            transform: translateY(-2px);
        }
        
        body.ui-old .modal-actions .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: var(--light);
        }
        
        body.ui-old .modal-actions .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: var(--vlc-orange);
        }
        
        /* ========================================
           FLOATING SETTINGS MENU (Old UI Only)
           ======================================== */
        
        .floating-settings-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 9999;
            display: none; /* Hidden by default */
        }
        
        /* Only show in Old UI */
        body.ui-old .floating-settings-container {
            display: block;
        }
        
        .floating-settings-btn {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--vlc-orange), #e65c00);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(255, 111, 0, 0.4);
            transition: all 0.3s ease;
        }
        
        .floating-settings-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(255, 111, 0, 0.6);
        }
        
        .floating-settings-btn i {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }
        
        .floating-settings-btn.active i {
            transform: rotate(90deg);
        }
        
        .floating-settings-menu {
            position: absolute;
            bottom: 70px;
            right: 0;
            background: rgba(20, 20, 30, 0.98);
            border-radius: 16px;
            padding: 0.5rem;
            min-width: 220px;
            max-height: 70vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px) scale(0.95);
            transition: all 0.3s ease;
        }
        
        .floating-settings-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
        }
        
        .floating-menu-section {
            padding: 0.5rem 0;
        }
        
        .floating-menu-section:not(:last-child) {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .floating-menu-title {
            font-size: 0.7rem;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.5);
            padding: 0.5rem 1rem;
            letter-spacing: 0.5px;
        }
        
        .floating-menu-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s ease;
            text-decoration: none;
        }
        
        .floating-menu-item:hover {
            background: rgba(255, 111, 0, 0.2);
            color: var(--vlc-orange);
        }
        
        .floating-menu-item i {
            width: 20px;
            text-align: center;
            font-size: 1rem;
        }
        
        .floating-menu-item span {
            font-size: 0.9rem;
        }
        
        .floating-menu-item.settings-item {
            background: rgba(255, 111, 0, 0.1);
            border: 1px solid rgba(255, 111, 0, 0.3);
        }
        
        .floating-menu-item.settings-item:hover {
            background: rgba(255, 111, 0, 0.3);
        }
        
        /* NEW UI: Sidebar Navigation */
        body.ui-new {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        
        body.ui-new .app-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        body.ui-new .app-sidebar {
            display: flex;
            width: 240px;
            background: var(--modal-bg);
            border-right: 1px solid rgba(168, 85, 247, 0.2);
            flex-direction: column;
            overflow-y: auto;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
            transition: transform 0.65s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.65s cubic-bezier(0.25, 0.46, 0.45, 0.94), width 0.65s cubic-bezier(0.25, 0.46, 0.45, 0.94), min-width 0.65s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.65s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            min-width: 240px;
        }
        
        /* Sidebar hidden state */
        body.ui-new .app-sidebar.sidebar-hidden {
            transform: translateX(-100%);
            opacity: 0;
            pointer-events: none;
            width: 0;
            min-width: 0;
            border-right: none;
        }
        
        /* Sidebar toggle button */
        .sidebar-toggle-btn {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border: 2px solid rgba(168, 85, 247, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4);
            opacity: 0;
            pointer-events: none;
        }
        
        .sidebar-toggle-btn:hover {
            transform: translateY(-50%) scale(1.15);
            box-shadow: 0 8px 24px rgba(168, 85, 247, 0.7);
        }
        
        .sidebar-toggle-btn i {
            color: white;
            font-size: 1.1rem;
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        /* Show toggle button only when sidebar is hidden */
        body.ui-new .app-sidebar.sidebar-hidden ~ .app-main .sidebar-toggle-btn {
            opacity: 1;
            pointer-events: all;
        }
        
        /* Adjust main content when sidebar is hidden */
        body.ui-new .app-sidebar.sidebar-hidden ~ .app-main {
            margin-left: 0;
        }
        
        body.ui-new .sidebar-logo {
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--light);
            border-bottom: 1px solid rgba(168, 85, 247, 0.15);
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new .sidebar-logo:hover {
            background: rgba(168, 85, 247, 0.1);
        }
        
        body.ui-new .sidebar-logo i {
            color: var(--vlc-orange);
            font-size: 1.8rem;
        }
        
        /* Sidebar close button hover effect */
        .sidebar-close-btn:hover {
            background: rgba(168, 85, 247, 0.2) !important;
            color: rgba(255, 255, 255, 1) !important;
        }
        
        /* Sidebar Stats Panel */
        body.ui-new .sidebar-stats {
            padding: 1rem 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        body.ui-new .stat-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: rgba(168, 85, 247, 0.08);
            border-radius: 8px;
            border: 1px solid rgba(168, 85, 247, 0.15);
        }
        
        body.ui-new .stat-item i {
            font-size: 1.5rem;
            color: var(--vlc-orange);
            width: 32px;
            text-align: center;
        }
        
        body.ui-new .stat-info {
            display: flex;
            flex-direction: column;
            flex: 1;
        }
        
        body.ui-new .stat-label {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        body.ui-new .stat-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--light);
        }
        
        body.ui-new .sidebar-divider {
            height: 1px;
            background: rgba(168, 85, 247, 0.15);
            margin: 0.5rem 1rem;
        }
        
        body.ui-new .nav-section-title {
            padding: 1rem 1.5rem 0.5rem;
            font-size: 0.7rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.5);
            letter-spacing: 1px;
        }
        
        body.ui-new .nav-badge {
            margin-left: auto;
            padding: 0.15rem 0.5rem;
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border-radius: 10px;
            font-size: 0.65rem;
            font-weight: 600;
        }
        
        /* Sidebar Quick Actions */
        body.ui-new .sidebar-quick-actions {
            padding: 0.75rem 1.5rem;
            margin-top: auto;
        }
        
        body.ui-new .quick-action-title {
            font-size: 0.7rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.5);
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }
        
        body.ui-new .quick-action-btn {
            width: 100%;
            padding: 0.65rem;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 8px;
            color: var(--light);
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }
        
        body.ui-new .quick-action-btn:hover {
            background: rgba(168, 85, 247, 0.2);
            border-color: var(--vlc-orange);
            transform: translateY(-1px);
        }
        
        body.ui-new .sidebar-user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        body.ui-new .sidebar-user-info i {
            font-size: 1.5rem;
            color: var(--vlc-orange);
        }
        
        body.ui-new .sidebar-nav {
            flex: 1;
            padding: 0.5rem 0;
        }
        
        body.ui-new .nav-item {
            padding: 0.85rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-left: 3px solid transparent;
            font-weight: 500;
        }
        
        body.ui-new .nav-item:hover {
            background: rgba(168, 85, 247, 0.1);
            color: var(--light);
            border-left-color: var(--vlc-orange);
        }
        
        body.ui-new .nav-item.active {
            background: rgba(168, 85, 247, 0.15);
            color: var(--light);
            border-left-color: var(--vlc-orange);
        }
        
        body.ui-new .nav-item i {
            width: 20px;
            text-align: center;
        }
        
        body.ui-new .sidebar-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid rgba(168, 85, 247, 0.15);
        }
        
        /* Main Content Area */
        body.ui-new .app-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: var(--dark);
        }
        
        /* Modern Header */
        body.ui-new header {
            position: static;
            background: linear-gradient(90deg, var(--primary) 0%, #1f1035 100%);
            padding: 1.25rem 2rem;
            border-bottom: 1px solid rgba(168, 85, 247, 0.2);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.2);
        }
        
        body.ui-new .header-container {
            justify-content: space-between;
            max-width: none;
        }
        
        body.ui-new .logo {
            display: none; /* Logo in sidebar instead */
        }
        
        body.ui-new .search-container {
            flex: 0 1 500px;
            margin: 0;
        }
        
        body.ui-new .search-container input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(168, 85, 247, 0.3);
            backdrop-filter: blur(10px);
        }
        
        body.ui-new .search-container input:focus {
            background: rgba(0, 0, 0, 0.4);
            border-color: var(--vlc-orange);
        }
        
        body.ui-new .user-actions {
            gap: 0.75rem;
        }
        
        body.ui-new .btn {
            border-radius: 8px;
            padding: 0.65rem 1.1rem;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
        }
        
        body.ui-new .btn-outline {
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.4);
        }
        
        body.ui-new .btn-outline.active {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border-color: transparent;
            color: white;
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4);
        }
        
        body.ui-new .btn-primary {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3);
        }
        
        /* Connection Status */
        body.ui-new .connection-status {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.4rem 0.8rem;
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.3);
            border-radius: 20px;
            font-size: 0.8rem;
            color: #28a745;
            white-space: nowrap;
        }
        
        body.ui-new .connection-status i {
            font-size: 0.5rem;
            animation: pulse 3s cubic-bezier(0.45, 0, 0.55, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(0.97); }
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; opacity: 0.8; }
            50% { opacity: 1; }
            100% { background-position: 200% 0; opacity: 0.8; }
        }
        
        /* Hide connection status in OLD UI */
        body.ui-old .connection-status {
            display: none;
        }
        
        /* Enhanced Page Header */
        body.ui-new .page-header-enhanced {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(168, 85, 247, 0.05);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        body.ui-new .page-title-section {
            flex: 1;
        }
        
        body.ui-new .page-subtitle {
            margin-top: 0.5rem;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }
        
        body.ui-new .page-actions {
            display: flex;
            gap: 0.75rem;
        }
        
        body.ui-new .action-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.65rem 1.25rem;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 8px;
            color: var(--light);
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-size: 0.9rem;
        }
        
        body.ui-new .action-btn:hover {
            background: rgba(168, 85, 247, 0.2);
            border-color: var(--vlc-orange);
            transform: translateY(-4px) scale(1.02);
        }
        
        /* Hide enhanced elements in OLD UI */
        body.ui-old .page-header-enhanced {
            display: none;
        }
        
        body.ui-old .page-subtitle {
            display: none;
        }
        
        /* Content Area */
        body.ui-new main {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            margin: 0;
            padding: 2rem 2.5rem;
            max-width: none;
            background: linear-gradient(135deg, var(--dark) 0%, #0a0612 100%);
        }
        
        /* Modern Section Titles */
        body.ui-new .section-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid rgba(168, 85, 247, 0.3);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        body.ui-new .section-title i {
            color: var(--vlc-orange);
        }
        
        /* Category Pills */
        body.ui-new .categories {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        body.ui-new .category {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.5rem;
            border-radius: 25px;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            backdrop-filter: blur(10px);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-weight: 500;
        }
        
        body.ui-new .category i {
            font-size: 0.9rem;
        }
        
        body.ui-new .category:hover {
            background: var(--hover-bg);
            border-color: var(--vlc-orange);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.2);
        }
        
        body.ui-new .category.active {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.4);
        }
        
        /* Modern Movie Cards with Glass Morphism */
        body.ui-new .movie-card {
            background: var(--card-bg);
            border: 1px solid rgba(168, 85, 247, 0.2);
            backdrop-filter: blur(15px);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new .movie-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 12px 30px rgba(168, 85, 247, 0.35);
            border-color: var(--vlc-orange);
        }
        
        body.ui-new .movie-poster {
            position: relative;
            overflow: hidden;
        }
        
        body.ui-new .movie-poster::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.7) 100%);
            opacity: 0;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        body.ui-new .movie-card:hover .movie-poster::after {
            opacity: 1;
        }
        
        body.ui-new .movie-poster img {
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new .movie-card:hover .movie-poster img {
            transform: scale(1.12);
        }
        
        /* New UI Add to List Button */
        body.ui-new .add-to-list-btn {
            position: absolute;
            top: 12px;
            left: 12px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(168, 85, 247, 0.5);
            color: var(--light);
            padding: 0.6rem;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0;
            transform: scale(0.7) translateY(10px);
            backdrop-filter: blur(10px);
            z-index: 2;
        }
        
        body.ui-new .movie-card:hover .add-to-list-btn {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
        
        body.ui-new .add-to-list-btn:hover {
            background: var(--success);
            border-color: var(--success);
            transform: scale(1.12) translateY(0);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }
        
        body.ui-new .add-to-list-btn.in-list {
            background: var(--success);
            border-color: var(--success);
            opacity: 1;
            transform: scale(1) translateY(0);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }
        
        body.ui-new .add-to-list-btn.in-list i:before {
            content: "\f00c"; /* checkmark */
        }
        
        /* New UI Done Watching Button */
        body.ui-new .movie-card .done-watching-btn {
            position: absolute;
            top: 12px;
            left: 60px; /* Position next to the add-to-list button */
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(23, 162, 184, 0.5);
            color: var(--light);
            padding: 0.6rem;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0;
            transform: scale(0.7) translateY(10px);
            backdrop-filter: blur(10px);
            z-index: 2;
        }
        
        body.ui-new .movie-card:hover .done-watching-btn {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
        
        body.ui-new .movie-card .done-watching-btn:hover {
            background: #17a2b8;
            border-color: #17a2b8;
            transform: scale(1.12) translateY(0);
            box-shadow: 0 4px 15px rgba(23, 162, 184, 0.4);
        }
        
        body.ui-new .movie-card .done-watching-btn.is-done {
            background: #17a2b8;
            border-color: #17a2b8;
            opacity: 1;
            transform: scale(1) translateY(0);
            box-shadow: 0 4px 15px rgba(23, 162, 184, 0.3);
        }
        
        body.ui-new .movie-card .done-watching-btn.is-done i:before {
            content: "\f058"; /* check-circle */
        }
        
        /* Continue Watching specific styles */
        .continue-watching-card .remove-continue-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(220, 38, 38, 0.9);
            border: 1px solid rgba(220, 38, 38, 0.5);
            color: white;
            padding: 0.6rem;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0;
            transform: scale(0.7);
            backdrop-filter: blur(10px);
            z-index: 2;
        }
        
        .continue-watching-card:hover .remove-continue-btn {
            opacity: 1;
            transform: scale(1);
        }
        
        .continue-watching-card .remove-continue-btn:hover {
            background: rgba(239, 68, 68, 1);
            transform: scale(1.12);
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.5);
        }
        
        /* Fix width for continue watching cards in slider to match trending cards */
        #continueWatchingSlider .continue-watching-card {
            flex: 0 0 260px;
            width: 260px;
        }
        
        /* Progress bar for continue watching cards */
        .continue-watching-card .movie-poster {
            position: relative;
        }
        
        .continue-watching-placeholder {
            width: 100%;
            padding-top: 150%; /* 2:3 aspect ratio to match posters */
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(255, 111, 0, 0.2) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .continue-watching-placeholder i {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            color: rgba(255, 255, 255, 0.3);
        }
        
        .continue-watching-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--vlc-orange) 0%, #ff8c42 100%);
            transition: width 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 0 10px rgba(255, 111, 0, 0.5);
            z-index: 2;
        }
        
        body.ui-new .movie-info {
            padding: 1.25rem;
            background: linear-gradient(180deg, rgba(42, 24, 71, 0.6) 0%, rgba(18, 10, 31, 0.8) 100%);
        }
        
        body.ui-new .movie-title {
            font-size: 1.05rem;
            margin-bottom: 0.5rem;
            color: var(--light);
        }
        
        body.ui-new .movie-meta {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            font-size: 0.85rem;
        }
        
        body.ui-new .movie-rating {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.2) 0%, rgba(255, 152, 0, 0.2) 100%);
            border: 1px solid rgba(255, 193, 7, 0.4);
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            backdrop-filter: blur(10px);
        }
        
        body.ui-new .movie-year {
            background: rgba(168, 85, 247, 0.15);
            border: 1px solid rgba(168, 85, 247, 0.3);
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
        }
        
        /* Genre Boxes */
        body.ui-new .genre-box {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.15) 0%, rgba(139, 92, 246, 0.1) 100%);
            border: 1px solid rgba(168, 85, 247, 0.3);
            backdrop-filter: blur(15px);
            border-radius: 16px;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new .genre-box:hover {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.25) 0%, rgba(139, 92, 246, 0.2) 100%);
            border-color: var(--vlc-orange);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(168, 85, 247, 0.3);
        }
        
        /* Modern Modal */
        body.ui-new .modal-content {
            background: linear-gradient(135deg, rgba(42, 24, 71, 0.95) 0%, rgba(18, 10, 31, 0.95) 100%);
            border: 1px solid rgba(168, 85, 247, 0.3);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }
        
        body.ui-new .modal-close {
            background: rgba(168, 85, 247, 0.2);
            border: 1px solid rgba(168, 85, 247, 0.3);
            backdrop-filter: blur(10px);
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new .modal-close:hover {
            background: rgba(220, 53, 69, 0.3);
            border-color: #dc3545;
            transform: rotate(90deg);
        }
        
        /* Buttons in Modal */
        body.ui-new .play-btn {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border: none;
            box-shadow: 0 6px 20px rgba(168, 85, 247, 0.4);
        }
        
        body.ui-new .play-btn:hover {
            box-shadow: 0 8px 25px rgba(168, 85, 247, 0.6);
            transform: translateY(-4px) scale(1.02);
        }
        
        /* ==== HERO SECTION ==== */
        body.ui-new .hero-section {
            position: relative;
            height: 80vh;
            min-height: 600px;
            margin: -2rem -1rem 3rem -1rem;
            overflow: hidden;
            border-radius: 0 0 20px 20px;
        }
        
        body.ui-new .hero-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.4);
        }
        
        body.ui-new .hero-gradient {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60%;
            background: linear-gradient(to top, var(--dark) 0%, transparent 100%);
        }
        
        body.ui-new .hero-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 4rem 3rem;
            z-index: 2;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        body.ui-new .hero-title {
            font-size: 4rem;
            font-weight: 900;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 20px rgba(0, 0, 0, 0.8);
            line-height: 1.1;
            max-width: 800px;
        }
        
        body.ui-new .hero-meta {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }
        
        body.ui-new .hero-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(168, 85, 247, 0.9);
            padding: 0.5rem 1rem;
            border-radius: 30px;
            font-weight: 700;
            color: white;
        }
        
        body.ui-new .hero-year, body.ui-new .hero-runtime {
            color: var(--tertiary);
            font-weight: 600;
        }
        
        body.ui-new .hero-overview {
            font-size: 1.2rem;
            line-height: 1.8;
            max-width: 700px;
            margin-bottom: 2rem;
            text-shadow: 1px 1px 10px rgba(0, 0, 0, 0.8);
            color: rgba(255, 255, 255, 0.95);
        }
        
        body.ui-new .hero-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        body.ui-new .hero-btn {
            padding: 1rem 2.5rem;
            border-radius: 8px;
            border: none;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        body.ui-new .hero-btn-primary {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(168, 85, 247, 0.5);
        }
        
        body.ui-new .hero-btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(168, 85, 247, 0.7);
        }
        
        body.ui-new .hero-btn-secondary {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
        }
        
        body.ui-new .hero-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-3px);
        }
        
        /* ==== HORIZONTAL SLIDERS ==== */
        body.ui-new .slider-section {
            margin-bottom: 3rem;
        }
        
        body.ui-new .slider-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding: 0 1rem;
        }
        
        body.ui-new .slider-title {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        body.ui-new .slider-title i {
            color: var(--vlc-orange);
        }
        
        body.ui-new .slider-nav {
            display: flex;
            gap: 0.5rem;
        }
        
        body.ui-new .slider-arrow {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(168, 85, 247, 0.2);
            border: 1px solid rgba(168, 85, 247, 0.3);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new .slider-arrow:hover {
            background: var(--vlc-orange);
            border-color: var(--vlc-orange);
            transform: scale(1.12);
        }
        
        body.ui-new .slider-arrow.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }
        
        body.ui-new .slider-container {
            position: relative;
            overflow-x: auto;
            overflow-y: hidden;
            padding: 0 1rem;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
        }
        
        body.ui-new .slider-container::-webkit-scrollbar {
            display: none; /* Chrome/Safari */
        }
        
        body.ui-new .slider-track {
            display: flex;
            gap: 1rem;
            padding-bottom: 1rem;
        }
        
        body.ui-new .slider-item {
            flex: 0 0 260px;
            width: 260px;
            background: var(--card-bg);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }
        
        body.ui-new .slider-item:hover {
            transform: scale(1.08);
            z-index: 10;
            box-shadow: 0 12px 40px rgba(168, 85, 247, 0.4);
            border-color: var(--vlc-orange);
        }
        
        body.ui-new .slider-poster {
            width: 100%;
            height: 375px;
            object-fit: cover;
            display: block;
        }
        
        body.ui-new .slider-info {
            padding: 1rem;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new .slider-item:hover .slider-info {
            opacity: 1;
            transform: translateY(0);
        }
        
        body.ui-new .slider-item-title {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: white;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        body.ui-new .slider-item-meta {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.9rem;
        }
        
        body.ui-new .slider-rating {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            color: var(--vlc-orange);
            font-weight: 700;
        }
        
        body.ui-new .slider-year {
            color: var(--tertiary);
        }
        
        /* Slider item buttons (Add to List, Done Watching) */
        body.ui-new .slider-item .add-to-list-btn,
        body.ui-new .slider-item .done-watching-btn {
            position: absolute;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 5;
            font-size: 0.85rem;
        }
        
        body.ui-new .slider-item .add-to-list-btn {
            top: 10px;
            left: 10px;
            background: rgba(139, 92, 246, 0.9);
        }
        
        body.ui-new .slider-item .done-watching-btn {
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
        }
        
        body.ui-new .slider-item:hover .add-to-list-btn,
        body.ui-new .slider-item:hover .done-watching-btn {
            opacity: 1;
        }
        
        body.ui-new .slider-item .add-to-list-btn:hover {
            background: var(--vlc-orange);
            transform: scale(1.1);
        }
        
        body.ui-new .slider-item .done-watching-btn:hover {
            background: #22c55e;
            transform: scale(1.1);
        }
        
        body.ui-new .slider-item .add-to-list-btn.in-list {
            background: var(--vlc-orange);
            opacity: 1;
        }
        
        body.ui-new .slider-item .done-watching-btn.is-done {
            background: #22c55e;
            opacity: 1;
        }
        
        /* Settings Modal */
        body.ui-new .settings-content {
            background: linear-gradient(135deg, rgba(42, 24, 71, 0.95) 0%, rgba(18, 10, 31, 0.95) 100%);
            border: 1px solid rgba(168, 85, 247, 0.3);
            backdrop-filter: blur(20px);
        }
        
        body.ui-new .settings-section {
            background: rgba(168, 85, 247, 0.05);
            border: 1px solid rgba(168, 85, 247, 0.2);
            backdrop-filter: blur(10px);
        }
        
        /* Loading Indicators */
        body.ui-new .loading {
            color: var(--vlc-orange);
        }
        
        /* Scrollbar Styling for New UI */
        body.ui-new ::-webkit-scrollbar {
            width: 10px;
        }
        
        body.ui-new ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }
        
        body.ui-new ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--vlc-orange) 0%, #9333ea 100%);
            border-radius: 5px;
        }
        
        body.ui-new ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #9333ea 0%, var(--vlc-orange) 100%);
        }
        
        /* ==== ENHANCED MODAL STYLES (NEW UI) ==== */
        body.ui-new .modal-header {
            height: 500px;
            position: relative;
        }
        
        body.ui-new .modal-backdrop {
            filter: brightness(0.3);
        }
        
        body.ui-new .modal-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 50%;
            background: linear-gradient(to top, var(--card-bg) 0%, transparent 100%);
        }
        
        body.ui-new .modal-header-content {
            z-index: 2;
            padding: 3rem;
        }
        
        body.ui-new .modal-poster {
            width: 220px;
            height: 330px;
            border-radius: 12px;
            border: 3px solid rgba(168, 85, 247, 0.3);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
        }
        
        body.ui-new .modal-title {
            font-size: 3rem;
            font-weight: 900;
            text-shadow: 2px 2px 15px rgba(0, 0, 0, 0.8);
            margin-bottom: 1rem;
        }
        
        body.ui-new .modal-rating {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            padding: 0.5rem 1rem;
            border-radius: 30px;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.4);
        }
        
        body.ui-new .modal-tagline {
            font-size: 1.2rem;
            color: var(--tertiary);
            font-style: italic;
        }
        
        body.ui-new .modal-body {
            background: var(--card-bg);
            padding: 3rem;
        }
        
        body.ui-new .modal-section-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            margin-top: 2rem;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid rgba(168, 85, 247, 0.3);
        }
        
        body.ui-new .modal-section-title:first-of-type {
            margin-top: 0;
        }
        
        body.ui-new .modal-section-title i {
            color: var(--vlc-orange);
        }
        
        body.ui-new .modal-overview {
            font-size: 1.1rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.9);
        }
        
        /* Enhanced Modal Action Buttons */
        body.ui-new .modal-actions-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        body.ui-new .primary-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        body.ui-new .btn-enhanced {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
            min-width: 200px;
        }
        
        body.ui-new .btn-enhanced::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        body.ui-new .btn-enhanced:hover::before {
            opacity: 1;
        }
        
        body.ui-new .btn-enhanced-primary {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            box-shadow: 0 8px 25px rgba(168, 85, 247, 0.4);
            color: white;
        }
        
        body.ui-new .btn-enhanced-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(168, 85, 247, 0.6);
        }
        
        body.ui-new .btn-enhanced-secondary {
            background: rgba(168, 85, 247, 0.15);
            border: 2px solid rgba(168, 85, 247, 0.3);
            color: white;
        }
        
        body.ui-new .btn-enhanced-secondary:hover {
            background: rgba(168, 85, 247, 0.25);
            border-color: var(--vlc-orange);
            transform: translateY(-3px);
        }
        
        body.ui-new .btn-icon {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        body.ui-new .btn-content {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 0.25rem;
        }
        
        body.ui-new .btn-title {
            font-size: 1.1rem;
            font-weight: 700;
            line-height: 1;
        }
        
        body.ui-new .btn-subtitle {
            font-size: 0.85rem;
            opacity: 0.8;
            line-height: 1;
        }
        
        body.ui-new .secondary-actions {
            display: flex;
            gap: 0.75rem;
        }
        
        body.ui-new .btn-icon-only {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 2px solid rgba(168, 85, 247, 0.3);
            background: rgba(168, 85, 247, 0.1);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-size: 1.1rem;
        }
        
        body.ui-new .btn-icon-only:hover {
            background: var(--vlc-orange);
            border-color: var(--vlc-orange);
            transform: scale(1.12);
        }
        
        /* Done Watching Button in modal - green when done */
        body.ui-new .btn-icon-only.done-watching-btn.is-done {
            background: #22c55e;
            border-color: #22c55e;
        }
        
        body.ui-new .btn-icon-only.done-watching-btn.is-done:hover {
            background: #16a34a;
            border-color: #16a34a;
        }
        
        /* Trakt Watchlist Button - Override circular icon styling */
        body.ui-new #traktWatchlistBtn {
            width: auto;
            height: auto;
            min-width: 160px;
            border-radius: 12px;
            padding: 0.75rem 1.25rem;
            font-size: 0.95rem;
            font-weight: 600;
            gap: 0.5rem;
            border: 2px solid rgba(168, 85, 247, 0.4);
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(139, 92, 246, 0.1));
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new #traktWatchlistBtn:hover {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.3), rgba(139, 92, 246, 0.2));
            border-color: rgba(168, 85, 247, 0.6);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3);
        }
        
        body.ui-new #traktWatchlistBtn.btn-success {
            border-color: rgba(16, 185, 129, 0.4);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(5, 150, 105, 0.1));
            color: #10b981;
        }
        
        body.ui-new #traktWatchlistBtn.btn-success:hover {
            border-color: rgba(16, 185, 129, 0.6);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(5, 150, 105, 0.2));
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        body.ui-new #traktWatchlistBtn.btn-secondary {
            border-color: rgba(168, 85, 247, 0.4);
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(139, 92, 246, 0.1));
            color: #a855f7;
        }
        
        body.ui-new #traktWatchlistBtn.btn-secondary:hover {
            border-color: rgba(168, 85, 247, 0.6);
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.3), rgba(139, 92, 246, 0.2));
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3);
        }
        
        body.ui-new #traktWatchlistBtn i {
            font-size: 1rem;
        }
        
        body.ui-new #traktWatchlistBtn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        body.ui-new .action-note {
            padding: 0.75rem 1rem;
            background: rgba(168, 85, 247, 0.1);
            border-left: 3px solid var(--vlc-orange);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        body.ui-new .action-note i {
            color: var(--vlc-orange);
        }
        
        body.ui-new .cast-card {
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new .cast-card:hover {
            border-color: var(--vlc-orange);
            box-shadow: 0 8px 25px rgba(168, 85, 247, 0.3);
            transform: translateY(-5px);
        }
        
        body.ui-new .cast-img {
            border-radius: 12px 12px 0 0;
        }
        
        body.ui-new .episode-card {
            background: rgba(168, 85, 247, 0.08);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 12px;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new .episode-card:hover {
            background: rgba(168, 85, 247, 0.15);
            border-color: var(--vlc-orange);
            box-shadow: 0 6px 20px rgba(168, 85, 247, 0.3);
            transform: translateY(-3px);
        }
        
        /* Ensure selected episode is clearly highlighted in the new UI */
        body.ui-new .episode-card.selected {
            border-color: var(--vlc-orange) !important;
            background: rgba(255, 105, 0, 0.14) !important;
            box-shadow: 0 8px 24px rgba(255, 105, 0, 0.35);
            transform: translateY(-3px);
        }
        
        body.ui-new .season-btn {
            background: rgba(168, 85, 247, 0.15);
            border: 1px solid rgba(168, 85, 247, 0.3);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new .season-btn:hover {
            background: rgba(168, 85, 247, 0.25);
            border-color: var(--vlc-orange);
            transform: translateY(-4px) scale(1.02);
        }
        
        body.ui-new .season-btn.active {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.5);
        }
        
        body.ui-new .torrent-item {
            background: rgba(168, 85, 247, 0.08);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 12px;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new .torrent-item:hover {
            background: rgba(168, 85, 247, 0.15);
            border-color: var(--vlc-orange);
            box-shadow: 0 6px 20px rgba(168, 85, 247, 0.25);
        }
        
        /* Enhanced Torrents Section */
        body.ui-new .torrents-container {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 2px solid rgba(168, 85, 247, 0.2);
        }
        
        body.ui-new .torrents-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        body.ui-new .provider-buttons {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            overflow-y: hidden;
            padding-bottom: 0.5rem;
            scrollbar-width: thin;
            scrollbar-color: rgba(168, 85, 247, 0.5) rgba(168, 85, 247, 0.1);
        }
        
        body.ui-new .provider-buttons::-webkit-scrollbar {
            height: 6px;
        }
        
        body.ui-new .provider-buttons::-webkit-scrollbar-track {
            background: rgba(168, 85, 247, 0.1);
            border-radius: 3px;
        }
        
        body.ui-new .provider-buttons::-webkit-scrollbar-thumb {
            background: rgba(168, 85, 247, 0.5);
            border-radius: 3px;
        }
        
        body.ui-new .provider-buttons::-webkit-scrollbar-thumb:hover {
            background: rgba(168, 85, 247, 0.7);
        }
        
        body.ui-new .provider-btn {
            padding: 0.75rem 1.25rem;
            border-radius: 10px;
            border: 2px solid rgba(168, 85, 247, 0.3);
            background: rgba(168, 85, 247, 0.1);
            color: white;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        body.ui-new .provider-btn:hover {
            background: rgba(168, 85, 247, 0.2);
            border-color: var(--vlc-orange);
            transform: translateY(-4px) scale(1.02);
        }
        
        body.ui-new .provider-btn.active {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.5);
        }
        
        body.ui-new .torrents-list {
            display: grid;
            gap: 1rem;
        }
        
        body.ui-new .torrent-item {
            background: rgba(168, 85, 247, 0.08);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 8px;
            padding: 0.75rem 1rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }
        
        body.ui-new .torrent-item:hover {
            background: rgba(168, 85, 247, 0.15);
            border-color: var(--vlc-orange);
            box-shadow: 0 3px 12px rgba(168, 85, 247, 0.2);
            transform: translateX(3px);
        }
        
        body.ui-new .torrent-title {
            font-weight: 600;
            font-size: 0.95rem;
            color: white;
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        body.ui-new .torrent-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
            font-size: 0.85rem;
        }
        
        body.ui-new .torrent-badge {
            padding: 0.25rem 0.6rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.8rem;
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            white-space: nowrap;
        }
        
        body.ui-new .torrent-badge.seeders {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.4);
            color: #22c55e;
        }
        
        body.ui-new .torrent-badge.leechers {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.4);
            color: #ef4444;
        }
        
        body.ui-new .torrent-badge.size {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.4);
            color: #3b82f6;
        }
        
        body.ui-new .torrent-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        
        body.ui-new .torrent-actions button {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.4rem;
            white-space: nowrap;
        }
        
        body.ui-new .torrent-actions .btn-play {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            color: white;
        }
        
        body.ui-new .torrent-actions .btn-play:hover {
            transform: scale(1.03);
            box-shadow: 0 3px 12px rgba(168, 85, 247, 0.4);
        }
        
        body.ui-new .torrents-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        /* Enhanced Filter Controls */
        body.ui-new .filter-controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
            align-items: center;
        }
        
        body.ui-new .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        body.ui-new .filter-group label {
            font-size: 0.85rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        body.ui-new .filter-group select,
        body.ui-new .filter-group input {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border: 2px solid rgba(168, 85, 247, 0.3);
            background: rgba(168, 85, 247, 0.1);
            color: white;
            font-size: 0.95rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            min-width: 150px;
        }
        
        body.ui-new .filter-group select:focus,
        body.ui-new .filter-group input:focus {
            outline: none;
            border-color: var(--vlc-orange);
            background: rgba(168, 85, 247, 0.15);
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1);
        }
        
        body.ui-new .filter-group select option {
            background: #1a1a1a;
            color: white;
        }
        
        body.ui-new .search-torrents-input {
            flex: 1;
            min-width: 250px;
        }
        
        /* Audio Issues Notice */
        body.ui-new .audio-issues-notice {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.15) 0%, rgba(147, 51, 234, 0.15) 100%);
            border: 2px solid rgba(168, 85, 247, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid var(--vlc-orange);
        }
        
        body.ui-new .audio-issues-notice h4 {
            color: var(--vlc-orange);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        body.ui-new .audio-issues-notice p {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
        }
        
        /* Enhanced Music Section */
        body.ui-new #music-page .page-header-enhanced {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.15) 0%, rgba(168, 85, 247, 0.15) 100%);
            border: 2px solid rgba(236, 72, 153, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        body.ui-new #music-page .page-title-section {
            margin-bottom: 1rem;
        }
        
        body.ui-new #music-page .section-title i {
            font-size: 1.5rem;
        }
        
        body.ui-new #music-page .page-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        
        body.ui-new #music-page .action-btn {
            background: rgba(236, 72, 153, 0.1);
            border: 2px solid rgba(236, 72, 153, 0.3);
            border-radius: 10px;
            padding: 0.65rem 1.25rem;
            color: white;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        body.ui-new #music-page .action-btn i {
            font-size: 1rem;
        }
        
        body.ui-new #music-page .action-btn:hover {
            background: linear-gradient(135deg, #ec4899 0%, #a855f7 100%);
            border-color: transparent;
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 6px 16px rgba(236, 72, 153, 0.35);
        }
        
        body.ui-new #music-page .books-search-section {
            margin-bottom: 2.5rem;
        }
        
        body.ui-new #music-page .books-search-bar {
            display: flex;
            gap: 1rem;
            align-items: center;
            background: rgba(236, 72, 153, 0.1);
            border: 2px solid rgba(236, 72, 153, 0.3);
            border-radius: 12px;
            padding: 1rem 1.5rem;
        }
        
        body.ui-new #music-page #music-search-input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-size: 1.05rem;
            outline: none;
        }
        
        body.ui-new #music-page .books-search-button {
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        body.ui-new #music-page #music-search-btn {
            background: linear-gradient(135deg, #ec4899 0%, #a855f7 100%);
            color: white;
        }
        
        body.ui-new #music-page #music-album-search-btn {
            background: linear-gradient(135deg, #38bdf8 0%, #0ea5e9 100%);
            color: white;
        }
        
        body.ui-new #music-page .books-search-button:hover {
            transform: scale(1.08);
            box-shadow: 0 4px 15px rgba(236, 72, 153, 0.5);
        }
        
        body.ui-new #music-page .books-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        body.ui-new #music-page .music-card,
        body.ui-new #music-page .album-card {
            background: rgba(236, 72, 153, 0.08);
            border: 1px solid rgba(236, 72, 153, 0.2);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
        }
        
        body.ui-new #music-page .music-card:hover,
        body.ui-new #music-page .album-card:hover {
            background: rgba(236, 72, 153, 0.15);
            border-color: #ec4899;
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(236, 72, 153, 0.3);
        }
        
        body.ui-new #music-page .album-tracks-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }
        
        body.ui-new #music-page .track-item {
            background: rgba(236, 72, 153, 0.08);
            border: 1px solid rgba(236, 72, 153, 0.2);
            border-radius: 10px;
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new #music-page .track-item:hover {
            background: rgba(236, 72, 153, 0.15);
            border-color: #ec4899;
            transform: translateX(5px);
        }
        
        body.ui-new #music-page .books-empty {
            text-align: center;
            padding: 4rem 2rem;
            background: rgba(236, 72, 153, 0.05);
            border: 2px dashed rgba(236, 72, 153, 0.3);
            border-radius: 16px;
        }
        
        body.ui-new #music-page .books-empty-icon {
            font-size: 4rem;
            color: #ec4899;
            margin-bottom: 1.5rem;
        }
        
        body.ui-new #music-page .books-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
            gap: 1rem;
        }
        
        body.ui-new #music-page .books-loading-spinner {
            font-size: 3rem;
            color: #ec4899;
        }
        
        body.ui-new #music-page .playlist-close-btn {
            background: rgba(239, 68, 68, 0.15);
            border: 2px solid rgba(239, 68, 68, 0.3);
            border-radius: 10px;
            padding: 0.75rem 1.25rem;
            color: #ef4444;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }
        
        body.ui-new #music-page .playlist-close-btn:hover {
            background: rgba(239, 68, 68, 0.25);
            transform: scale(1.08);
        }
        
        /* Enhanced Books Section */
        body.ui-new #books-page .page-header-enhanced {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(168, 85, 247, 0.15) 100%);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        body.ui-new #books-page .books-search-bar {
            display: flex;
            gap: 1rem;
            align-items: center;
            background: rgba(59, 130, 246, 0.1);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 1rem 1.5rem;
        }
        
        body.ui-new #books-page #books-search-input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-size: 1.05rem;
            outline: none;
        }
        
        body.ui-new #books-page .books-search-button {
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            border: none;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        body.ui-new #books-page .books-search-button:hover {
            transform: scale(1.08);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.5);
        }
        
        body.ui-new #books-page .books-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1.5rem;
        }
        
        body.ui-new #books-page .book-card {
            background: rgba(59, 130, 246, 0.08);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
        }
        
        body.ui-new #books-page .book-card:hover {
            background: rgba(59, 130, 246, 0.15);
            border-color: #3b82f6;
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(59, 130, 246, 0.3);
        }
        
        body.ui-new #books-page .books-empty {
            text-align: center;
            padding: 4rem 2rem;
            background: rgba(59, 130, 246, 0.05);
            border: 2px dashed rgba(59, 130, 246, 0.3);
            border-radius: 16px;
        }
        
        body.ui-new #books-page .books-empty-icon {
            font-size: 4rem;
            color: #3b82f6;
            margin-bottom: 1.5rem;
        }
        
        body.ui-new #books-page .books-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
            gap: 1rem;
        }
        
        body.ui-new #books-page .books-loading-spinner {
            font-size: 3rem;
            color: #3b82f6;
        }
        
        /* Settings Page Styles */
        .settings-page-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .settings-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid rgba(168, 85, 247, 0.2);
            padding-bottom: 0;
            flex-wrap: wrap;
        }
        
        .settings-tab {
            padding: 1rem 2rem;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-bottom: 3px solid transparent;
            position: relative;
            bottom: -2px;
        }
        
        .settings-tab:hover {
            color: var(--light);
            background: rgba(168, 85, 247, 0.05);
        }
        
        .settings-tab.active {
            color: var(--vlc-orange);
            border-bottom-color: var(--vlc-orange);
            background: rgba(255, 111, 0, 0.05);
        }
        
        .settings-sections {
            position: relative;
        }
        
        .settings-section {
            display: none;
            animation: fadeIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .settings-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .settings-card {
            background: var(--card-bg);
            border-radius: 12px;
            margin-bottom: 1.5rem;
            overflow: hidden;
            border: 1px solid rgba(168, 85, 247, 0.15);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .settings-card:hover {
            border-color: rgba(168, 85, 247, 0.3);
            box-shadow: 0 4px 20px rgba(168, 85, 247, 0.1);
        }
        
        .settings-card-header {
            background: var(--modal-bg);
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid rgba(168, 85, 247, 0.15);
        }
        
        .settings-card-header h3 {
            margin: 0;
            font-size: 1.2rem;
            color: var(--light);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .settings-card-header h3 i {
            color: var(--vlc-orange);
        }
        
        .settings-card-body {
            padding: 1.5rem;
        }
        
        .settings-card-body .form-group {
            margin-bottom: 1.5rem;
        }
        
        .settings-card-body .form-group:last-child {
            margin-bottom: 0;
        }
        
        .settings-card-body label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .settings-card-body input[type="text"],
        .settings-card-body input[type="url"],
        .settings-card-body input[type="password"],
        .settings-card-body select,
        .settings-card-body textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--input-bg);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 8px;
            color: var(--light);
            font-size: 0.95rem;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .settings-card-body input:focus,
        .settings-card-body select:focus,
        .settings-card-body textarea:focus {
            outline: none;
            border-color: var(--vlc-orange);
            background: rgba(0, 0, 0, 0.4);
        }
        
        .settings-card-body button {
            padding: 0.75rem 1.5rem;
            background: var(--vlc-orange);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .settings-card-body button:hover {
            background: #e65100;
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(255, 111, 0, 0.3);
        }
        
        .settings-card-body .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        
        .settings-card-body .checkbox-group input[type="checkbox"] {
            width: auto;
            cursor: pointer;
        }
        
        .settings-card-body .radio-group {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .settings-card-body .radio-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: rgba(168, 85, 247, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .settings-card-body .radio-option:hover {
            background: rgba(168, 85, 247, 0.1);
        }
        
        .settings-card-body .radio-option input[type="radio"] {
            width: auto;
            cursor: pointer;
        }
        
        /* Responsive adjustments for New UI */
        @media (max-width: 1024px) {
            body.ui-new .app-sidebar {
                width: 200px;
            }
            
            body.ui-new main {
                padding: 1.5rem 1.5rem;
            }
        }
        
        @media (max-width: 768px) {
            body.ui-new .app-sidebar {
                position: fixed;
                left: -240px;
                top: 0;
                bottom: 0;
                z-index: 1000;
                transition: left 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }
            
            body.ui-new .app-sidebar.mobile-open {
                left: 0;
            }
            
            body.ui-new .search-container {
                flex: 1;
            }
        }
        
        /* Custom Scrollbar for IPTV Category Select Dropdown */
        #xtream-category-select {
            /* Enhanced dropdown styling */
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-height: 300px;
            overflow-y: auto;
        }
        
        #xtream-category-select:hover {
            border-color: rgba(59, 130, 246, 0.5) !important;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        #xtream-category-select:focus {
            outline: none;
            border-color: rgba(59, 130, 246, 0.7) !important;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        /* Custom scrollbar for the dropdown options */
        #xtream-category-select::-webkit-scrollbar {
            width: 12px;
        }
        
        #xtream-category-select::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.05);
        }
        
        #xtream-category-select::-webkit-scrollbar-thumb {
            background: #6b7280;
            border-radius: 10px;
            border: 2px solid rgba(0, 0, 0, 0.3);
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        #xtream-category-select::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
            border-color: rgba(0, 0, 0, 0.5);
        }
        
        #xtream-category-select::-webkit-scrollbar-thumb:active {
            background: #4b5563;
        }
        
        /* Dropdown options styling */
        #xtream-category-select option {
            background: #1b1b1b;
            color: #fff;
            padding: 0.5rem;
            transition: background 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        #xtream-category-select option:hover {
            background: rgba(59, 130, 246, 0.2);
        }
        
        #xtream-category-select option:checked {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: #fff;
            font-weight: 600;
        }

        /* Reader Fullscreen Mode */
        body.reader-fullscreen-mode .custom-title-bar,
        body.reader-fullscreen-mode header,
        body.reader-fullscreen-mode .app-sidebar,
        body.reader-fullscreen-mode .sidebar-toggle-btn {
            display: none !important;
        }
        
        body.reader-fullscreen-mode.ui-new:not(.platform-darwin) {
            padding-top: 0 !important;
        }
        
        body.reader-fullscreen-mode .app-main {
            margin: 0 !important;
            height: 100vh !important;
            width: 100vw !important;
        }
        
        body.reader-fullscreen-mode main {
            padding: 0 !important;
            margin: 0 !important;
            max-width: none !important;
        }

        /* Comics specific fullscreen overrides */
        body.reader-fullscreen-mode #comics-page .page-header-enhanced,
        body.reader-fullscreen-mode #comics-filter-container,
        body.reader-fullscreen-mode #comics-back-btn,
        body.reader-fullscreen-mode #comics-browse-btn {
            display: none !important;
        }
        
        body.reader-fullscreen-mode #comics-search-container {
            margin-top: 1rem !important;
            margin-bottom: 1rem !important;
        }

        body.reader-fullscreen-mode #mangaReaderBack {
            display: none !important;
        }